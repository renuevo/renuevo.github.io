{"componentChunkName":"component---src-templates-blog-post-js","path":"/design-pattern/observer-pattern/","result":{"data":{"site":{"siteMetadata":{"title":"renuevo blog","author":"deokhwa kim","siteUrl":"https://renuevo.github.io","comment":{"disqusShortName":"https-renuevo-github-io","utterances":""},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"285d14a8-9c96-579e-b213-2776f5594b33","excerpt":"옵저버 패턴은 Java 내부와 Spring Core, Reative Programming의 기본이 되는 패턴입니다\n옵저버 디자인 패턴은 기본적으로 와 를 가지고 있습니다   1. Subject Observer의 Manager 개념으로 Observer를 등록하여 특정 이벤트가 발생했을때 관찰자들이 알 수 있도록 해준다   2. Observer 실제 관찰자로 이벤트의 따른 기능들이 구현되어 있고, Subject에 등록되었다가 호출되어 진다   기본적으로 Observer…","html":"<p>옵저버 패턴은 Java 내부와 Spring Core, Reative Programming의 기본이 되는 패턴입니다\n옵저버 디자인 패턴은 기본적으로 <code class=\"language-text\">Subject</code>와 <code class=\"language-text\">Observer</code>를 가지고 있습니다  </p>\n<blockquote>\n<p><strong>1. Subject</strong></p>\n<blockquote>\n<p>Observer의 Manager 개념으로 Observer를 등록하여 특정 이벤트가 발생했을때 관찰자들이 알 수 있도록 해준다  </p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p><strong>2. Observer</strong></p>\n<blockquote>\n<p>실제 관찰자로 이벤트의 따른 기능들이 구현되어 있고, Subject에 등록되었다가 호출되어 진다  </p>\n</blockquote>\n</blockquote>\n<p>기본적으로 Observer 인터페이스를 생성해 두고 Observer를 구현해서 Subject의 등록해서 사용합니다<br>\n<strong><em>한마디로, 여러 기능들을 하나의 인터페이스로 통합해서 Subject의 등록해서 호출하는 로직으로 볼 수 있습니다 <span class=\"sub_header\">(1 대 N관계)</span></em></strong>  </p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.61849710982659%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQUlEQVQoz31RW6uCYBD0//8Ug8Ce1PAtqCADsTK6aYFFale1Uqg5zJ6jRMRZ+FjbdmdmZxX8xev1knw4HDCfz7FerxFFEe73O263m+Tr9YrhcIjpdArbtqFpGrrdLsIwxHg8Rp7nUCrA5/Mpmc3NZhOGYcg3gbIsk+bz+Yx+vy9gg8EAo9FIgChgtVpJr1Ipq3JRFFgul6Kwqr0HBz3PkzebzbDdbhHHseSyLH8VfoI+Hg9R9fkf62ma1o/2XC4XUc/fFKNUqx6PR2k4nU5IkkRYueJ+v6/BqYLr0YogCLDb7WSG/QSkv7WHNPxbkJXKKlJawVUJyPUXi0VN2uv1oEwmEynSaPpCdqrbbDYy6LouHMcRZTwCB0nCA5Do/cmVG40GWq0W2u02LMuCruvwfV/YVFWVa7NumiY6nY4Y/1/8ALPFVEQLu992AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"observer_pattern\"\n        title=\"observer_pattern\"\n        src=\"/static/1b9096c3cb052b595e5153464847fe52/1e043/Observer.png\"\n        srcset=\"/static/1b9096c3cb052b595e5153464847fe52/991de/Observer.png 173w,\n/static/1b9096c3cb052b595e5153464847fe52/e4d6b/Observer.png 345w,\n/static/1b9096c3cb052b595e5153464847fe52/1e043/Observer.png 690w,\n/static/1b9096c3cb052b595e5153464847fe52/c3fd4/Observer.png 854w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span class=\"img_caption\">출처 : <a href=\"https://ko.wikipedia.org/wiki/%EC%98%B5%EC%84%9C%EB%B2%84_%ED%8C%A8%ED%84%B4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">위키백과 옵서버 패턴</a></a></span></p>\n<hr>\n<p><strong><em>이해를 돕기위해 Observer 부터 구현해 보겠습니다</em></strong></p>\n<h3 id=\"observer-sample\" style=\"position:relative;\"><a href=\"#observer-sample\" aria-label=\"observer sample permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Observer Sample</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Observer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>       <span class=\"token comment\">//옵저버 인터페이스</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">void</span> <span class=\"token function\">printEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ObserverEventA</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Observer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span> \n        <span class=\"token annotation punctuation\">@Override</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Event : \"</span> <span class=\"token operator\">+</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//옵저버 기능</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    </code></pre></div>\n<br/>\n<h3 id=\"subject-sample\" style=\"position:relative;\"><a href=\"#subject-sample\" aria-label=\"subject sample permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subject Sample</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Subject</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">void</span> <span class=\"token function\">registerObserver</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Observer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> observer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//옵저버 등록</span>\n\n        <span class=\"token keyword\">void</span> <span class=\"token function\">removeObserver</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Observer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> observer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//옵저버 삭제</span>\n\n        <span class=\"token keyword\">void</span> <span class=\"token function\">executeObserver</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>               <span class=\"token comment\">//옵저버 실행</span>\n    <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SampleSubject</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Subject</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Observer</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> observerSet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CopyOnWriteArraySet</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//Thread Safe Set</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerObserver</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Observer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> observer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observerSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>observer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">removeObserver</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Observer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> observer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observerSet<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>observer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">executeObserver</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observerSet<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">-></span> o<span class=\"token punctuation\">.</span><span class=\"token function\">printEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"observer-run\" style=\"position:relative;\"><a href=\"#observer-run\" aria-label=\"observer run permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Observer Run</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">observerTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token class-name\">Subject</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> subject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SampleSubject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">//observer manager 생성</span>\n        \n        subject<span class=\"token punctuation\">.</span><span class=\"token function\">registerObserver</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ObserverEventA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">//observer 등록</span>\n \n        subject<span class=\"token punctuation\">.</span><span class=\"token function\">registerObserver</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>                 <span class=\"token comment\">//lambda식 등록도 가능합니다</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Event : \"</span> <span class=\"token operator\">+</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         \n        \n        subject<span class=\"token punctuation\">.</span><span class=\"token function\">registerObserver</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token operator\">::</span><span class=\"token function\">println</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">//lambda 단순 println</span>\n\n        subject<span class=\"token punctuation\">.</span><span class=\"token function\">executeObserver</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Observer Run\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>            <span class=\"token comment\">//실행</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<blockquote>\n<p><strong>실행 결과</strong></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Event : Observer Run\nEvent : Observer Run\nObserver Run</code></pre></div>\n<hr>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>Java에서도 JDK1.0에서 Observer와 Observable이 릴리즈되어 사용할 수 있습니다<br>\n하지만 자바 제네릭이 없던 시절이라.. Object타입을 사용해서 안전성이 보장되지 않습니다\n그래서 인지 <strong>JDK9 버젼</strong> 부터는 <strong>Deprecated</strong> 되었습니다</p>\n<br/>\n<p>더 나아가 Observer 구현해서 사용 하시기전 다음과 같은 사항을 권고하고 있습니다  </p>\n<blockquote>\n<p><strong>1. 이벤트 모델</strong></p>\n<blockquote>\n<p>Java.beans 패키지 사용으로 구성  </p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p><strong>2. 쓰레드간 메시징</strong></p>\n<blockquote>\n<p>java.util.concurrent 패키지에서 동시 데이터 조작 구조를 사용  </p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p><strong>3. Reactive Programing</strong></p>\n<blockquote>\n<p>Flow API를 참조하여 구현</p>\n</blockquote>\n</blockquote>\n<p>자세한 관련 내용은 <a href=\"https://dzone.com/articles/javas-observer-and-observable-are-deprecated-in-jd\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Java’s Observer and Observable Are Deprecated in JDK 9</a>를 참고 하세요</p>","frontmatter":{"title":"[DesignPattern] 옵저버 패턴(Observer Pattern)이란?","date":"September 05, 2019"}}},"pageContext":{"slug":"/design-pattern/observer-pattern/","previous":{"fields":{"slug":"/spring/spring-aop/"},"frontmatter":{"title":"[Spring] Spring AOP란?","category":"Spring"}},"next":{"fields":{"slug":"/notion/blocking-nonBlocking-synchronous-asynchronous/"},"frontmatter":{"title":"[Notion] 동기(Synchronous)와 비동기(Asynchronous) & 블로킹(Blocking)과 논블로킹(NonBlocking)","category":"Notion"}}}},"staticQueryHashes":["3128451518","96099027"]}