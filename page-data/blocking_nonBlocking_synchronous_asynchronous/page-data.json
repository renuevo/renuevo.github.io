{"componentChunkName":"component---src-templates-blog-post-index-js","path":"/blocking_nonBlocking_synchronous_asynchronous/","webpackCompilationHash":"0e029bac122412373e55","result":{"data":{"site":{"siteMetadata":{"title":"DRcode","author":"Deokhwa Kim"}},"markdownRemark":{"id":"90550f02-c7a4-5612-a081-2ba4b7f4fbe8","html":"<h2>사건의 발단</h2>\n<p>얼마전 Reactive Programing을 공부하면서 <a href=\"https://www.youtube.com/channel/UCwjaZf1WggZdbczi36bWlBA\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">백기선님의 유튜브</a>를 보다 문득 의문이 생기는 부분이 있었습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"textbox\"><pre class=\"language-textbox\"><code class=\"language-textbox\">By being built around the core pillars of being fully asynchronous and non-blocking,  \nReactive Programming is an alternative to the more limited ways of doing asynchronous code in the JDK: namely Callback based APIs and Future.</code></pre></div>\n<p><strong><em>\"asynchronous하면 당연히 non-blocking 되는 게 아닌가?\"</em></strong>  지금까지 저는 비동기면 당연히 논블록킹하다고 생각하고 있었습니다<br>\n그래서 알아보게 되었습니다  </p>\n<hr>\n<h2>동기(Synchronous)와 비동기(Asynchronous)</h2>\n<p><strong><em>호출된 메서드를 호출하는 쪽에서 관심을 가지고 있는지 봅니다</em></strong></p>\n<blockquote>\n<p><strong>1. 동기(Synchronous)</strong></p>\n<blockquote>\n<p>호출되는 기능의 완료를 호출한 쪽에서 확인하고 처리한다<br>\n단순히 기능의 완료를 호출하는 쪽에서 관심을 보이면 동기로 보면 됩니다<br>\n<code class=\"language-text\">일반적인 함수 호출</code>이 여기에 해당됩니다  </p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p><strong>2. 비동기(Asynchronous)</strong></p>\n<blockquote>\n<p>호출되는 기능의 완료를 호출 한 쪽에서 알아서 처리하는 것<br>\n호출하는 쪽에서 비동기로 호출한다는건 해당 기능의 완료가 어떻게 되든 신경쓰지 않는다는 겁니다<br>\n호출된쪽에서는 <code class=\"language-text\">callback</code>을 통해 완료를 전달하게 됩니다  </p>\n</blockquote>\n</blockquote>\n<hr>\n<h2>블로킹(Blocking)과 논블로킹(NonBlocking)</h2>\n<p><strong><em>메인 프로세스 플로우의 제어권에 초점을 맞추고 있습니다</em></strong></p>\n<blockquote>\n<p><strong>1. 블로킹(Blocking)</strong></p>\n<blockquote>\n<p>메인 플로우의 제어권이 호출된 쪽으로 넘어가서 해당 제어권을 다시 돌아오기를 기다립니다<br>\n기다리는 동안 메인 플로우는 제어권을 상실하여 아무것도 하지 않습니다  </p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p><strong>2. 논블로킹(NonBlocking)</strong></p>\n<blockquote>\n<p>메인 플로우가 제어권을 바로 반환 받습니다<br>\n메인 플로우는 제어권을 가지고 있으므로 얼마든지 본인의 플로우대로 작업을 실행합니다  </p>\n</blockquote>\n</blockquote>\n<hr>\n<h2>같이 생각하기</h2>\n<p><strong><em>이제 동기와 비동기 &#x26; 블로킹과 논블로킹을 같이 생각해 보겠습니다</em></strong>  </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9dd3ba94b99f3150cb3ca0e9681119bc/f5be3/developer_works_metrix.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.80464371497198%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABcRAAAXEQHKJvM/AAADDUlEQVQoz22Ra0hTYRjHZ8vt1KYWpFIfoqKCiAz6KCOIikystBLb1ctKGXjbTE2tpWsrW7rt3N6ds7ZypX4oi2rRknS1M+83LGuE5jTztrxm0YKI01EoFHzgz//l/fDj97wvi7VsOGz2Ukdt3cY6uGsnm6ZpVth6fmQItG5HGI8fefhAFPvQ3t3shMJ9QaGbQkMgPrSNy+NuXxcKbQ2LgHjZNgFr1amRyzkj5eVZ80ZjcXdxUZlLpSzvvVyi+WnECrsri9U3qNiispdHSi7WCLQ5d6Kvq+wCra4xRq12HE1ezlmzMyJiSdGRmQ1NGypvDFeY7k7ABDlqwCx+3GIJmEkwRGjJio44UPI0wa57I7Fed4utpY1JNrQvHuhcxwv+wYKZbAlmszczHSEUCDb49XrN28ys2t8EaaCtdyr8AEF9qAF8NuuQmy1xsKpWdK+0XmEreJB6L8WaWAe/jYd1DTHK5YZBadHRQYuHpzlKaPqW/ppXranymwA+acDAGMDBOAaDL4QW1bedQJQ14uorTkVV/kP5/WRb0mPTu3iEMVSteDvaN7TUzlwVd+RWhfZzpYmYAxZ4DifheTMJBzCLqQ8rAzfdsajGeZqsbJXgmheJFvWz+Ntozynm7tjFFcD9cdIlw9hCGMp69F6nej5gzrB7yAx7k0VR3UrkOseRorpGYrBViHndZ7C25yeIFibtL06avdQ5svPlmfxVfznpiY8rdM1phJ5fQNS4AJKcU4TUE8BF3bQxr8mH/PmQZupvkFtGW7OJ0ZZMYoBSkPRAOjLTJv2/Mo9J+JpgTjjTG/ekXw2RPRvSpYBXNRldtGExyU0zWKJ7ClyiPiHfemTIoFtO/PDmIpPtCtzllFYFPp7HJprF/4EcJqFrIR5/Eb4/z8STOoZ1Kdbm+2LnBC5yfAEi15j5LDUNCj2DyAIDnOtKRceaZfgoJcHft8nIH1457m+WqFZdWeoY4YrrJ7TC+ikylQqgKa+/42men2hyB20soPrRhW4ZMkSlmWd7M7GvnQp8tleB0P0XkHHG8C+Dy3Ypemjz7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"developer_works_metrix\"\n        title=\"developer_works_metrix\"\n        src=\"/static/9dd3ba94b99f3150cb3ca0e9681119bc/4d297/developer_works_metrix.png\"\n        srcset=\"/static/9dd3ba94b99f3150cb3ca0e9681119bc/07e12/developer_works_metrix.png 240w,\n/static/9dd3ba94b99f3150cb3ca0e9681119bc/5ca43/developer_works_metrix.png 480w,\n/static/9dd3ba94b99f3150cb3ca0e9681119bc/4d297/developer_works_metrix.png 960w,\n/static/9dd3ba94b99f3150cb3ca0e9681119bc/f5be3/developer_works_metrix.png 1249w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span class=\"img_caption\"> 출처 : <a href=\"http://homoefficio.github.io/2017/02/19/Blocking-NonBlocking-Synchronous-Asynchronous/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Homo Efficio님 블로그</a> </span></p>\n<br/>\n<p>그림으로 보면 다음과 같습니다<br>\n2 x 2로 해당 개념들을 믹스해보면 다음과 같습니다</p>\n<ul>\n<li>Sync-Blocking</li>\n<li>Sync-NonBlocking</li>\n<li>Async-Blocking</li>\n<li>Async-NonBlocking</li>\n</ul>\n<p>그럼 하나하나 차근차근 살펴 보겠습니다</p>\n<hr>\n<h2>동기 블로킹 (Sync_Blocking)</h2>\n<p><strong><em>메인 프로세스에서 제어권이 넘어가서 작업이 끝나고 제어권을 다시 받는다</em></strong></p>\n<p>일반적인 순서대로 호출되는 함수 호출이 Sync_Blocking 입니다</p>\n<h4>Sample Source</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleCode</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//Run</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">syncBlockTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">//제어권이 Sum 메서드로 넘어갑니다</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = 귀요미지..\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</br>\n<h4>실행결과</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1 + 1 = 2\n1 + 1 = 귀요미지..</code></pre></div>\n<br/>\n<p>제어권이 sum 메서드로 넘어가며 블로킹 되었고 syncBlockTest는 제어권을 잃어서<br>\n<code class=\"language-text\">1 + 1 = 귀요미지..</code>를 호출하지 않고 기다렸다가 <strong>순차적</strong>으로 실행 되었습니다</p>\n<hr>\n<h2>동기 논블로킹 (Sync_NonBlocking)</h2>\n<p><strong><em>메인 프로세스에서 제어권이 넘겼다가 바로 받지만 호출된 기능의 완료에 관심을 보입니다</em></strong></p>\n<p><strong>그림을 다시한번 보시겠습니다</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 803px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e4fb3a3bc9f924ae606d591d5d6f68f6/6941e/sync_nonBlocking.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.69613947696139%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABcRAAAXEQHKJvM/AAACCUlEQVQoz2NgwAP+/1+GLiQIxDJALAfEEkAsBsSiDISAsacM0LA1YHZgsY5YRJ2BYkKnibRFgJyRroOEvb6zpI2ek6StkYe0hY69hGNwma5CdJORgmuyGh9WA31ztYAG/gez67e6Zkw46ze177R/b90WtynVG1ymlK92mla81GFG6QrH6SB+3ynfngln/adlz7RyQzeLEUTwi3Ewth/wArObd3tkTr4UOK11r9vkjkNuk/tOeU3sO+01oR+IJ5716p9w2mfCxAsBvVOuBE7Pm2vjTtD7TTs9Mqdc9ptSvDxofu78mBVN+zLmgHDt1pR5JWtSllTtCZsz5ZJv9+SLgdNz5yAMZAZiLSBWg9LqLGxM2kBasmWPZ8aUy75Ti5ZFLsxbmL6qdnvuwtpteQvzFyavTJiUsDllVdDKqVd8u9ANBAEeIOYGYk4mZkZuAXEOEJ+teRfYhVNLVwbNK1wasaT1QOLM1oNJM8tWhi9Mnx2yKmuD/xKgfDcwWDAMxOnlqVf8phQtC1+YOTN+Tf3OrPn1u7Lnl65MWpI2O35d0pqAlVMJGahpLQaM5TsQA3eBIsVvasmKoHk1W5PnN+9Lnd1yIG120bKoJenTw1bX7QqZBXbhRTwGIieb5l3umZMuBExrP+A2ceoVn54pl316pgLxhLNeff2nPfonnfftm3g+oHfypYBpIAMB0Pjpxxj8qxMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sync_nonBlocking\"\n        title=\"sync_nonBlocking\"\n        src=\"/static/e4fb3a3bc9f924ae606d591d5d6f68f6/6941e/sync_nonBlocking.png\"\n        srcset=\"/static/e4fb3a3bc9f924ae606d591d5d6f68f6/07e12/sync_nonBlocking.png 240w,\n/static/e4fb3a3bc9f924ae606d591d5d6f68f6/5ca43/sync_nonBlocking.png 480w,\n/static/e4fb3a3bc9f924ae606d591d5d6f68f6/6941e/sync_nonBlocking.png 803w\"\n        sizes=\"(max-width: 803px) 100vw, 803px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span class=\"img_caption\"> <b> Sync_NonBlocking </b> </span></p>\n<p>여기서 부터 애매해서 많이들 어려워하는 부분입니다<br>\n<del>하지만 걱정하지 마세요 Sync_NonBlocking은 일반적이지 않습니다</del>  </p>\n<h4>Sample Source</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Async</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AsyncCodeTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Async</span>  <span class=\"token comment\">//Async로 비동기 논블로킹이 자동으로 구현되기 때문에 헷갈리기 쉽습니다</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">asyncSum</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AsyncResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token annotation punctuation\">@EnableAsync</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleCode</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">//Run</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">asyncBlockTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> sumResult <span class=\"token operator\">=</span> asyncCodeTest<span class=\"token punctuation\">.</span><span class=\"token function\">asyncSum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//제어권을 바로 반환 받습니다(NonBlocking)</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>sumResult<span class=\"token punctuation\">.</span><span class=\"token function\">isDone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>  <span class=\"token comment\">//메인 프로세스는 주기적으로 asyncSum의 완료를 확인 합니다(핵심)</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = 귀요미지..\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//asyncSum과 상관없이 메인 프로세스가 자리 일을 합니다           </span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = \"</span> <span class=\"token operator\">+</span> sumResult<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//asyncSum의 호출을 이미 isDone()으로 알고 있습니다</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</br>\n<h4>실행결과</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.....\n1 + 1 = 귀요미지..\n1 + 1 = 귀요미지..\n1 + 1 = 귀요미지..\n1 + 1 = 귀요미지..\n1 + 1 = 귀요미지..\n1 + 1 = 귀요미지..\n1 + 1 = 2</code></pre></div>\n<br/>\n<p>이부분을 이해하는데 있어서 많이 어려웠던거 같습니다<br>\n@Async면 async지 왜.. sync야 라고 생각하게 되었고 보면 볼수록 더 헷갈리게 되는 개념이었습니다  </p>\n<h4>하지만 판별의 핵심은</h4>\n<blockquote>\n<p><strong>1. 제어권의 판별</strong></p>\n<blockquote>\n<p>제어권이 메인 프로세스로 부터 (거의)이관되어 지지 않음 = NonBlocking  </p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p><strong>2. 관심의 판별</strong>  </p>\n<blockquote>\n<p>메인 프로세스가 asyncSum의 isDone()을 확인하며 완료를 직접 확인함 = sync </p>\n</blockquote>\n</blockquote>\n<hr>\n<h2>비동기 논블로킹 (Async_NonBlocking)</h2>\n<p><strong><em>메인 프로세스에서 제어권이 넘겼다가 바로 받고 호출된 기능의 완료에 관심을 갖지 않습니다</em></strong></p>\n<p>원활한 설명을 위해서 비동기 논블로킹부터 설명하겠습니다\n호출된 기능의 완료에 관심을 갖지 않는다는 말은 기능이 알아서 완료여부를 반환해서 Pull 해주는 것도 포함됩니다 <span class=\"sub_header\">(callback)</span></p>\n<h4>Sample Source</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Async</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AsyncCodeTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Async</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">asyncSum</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = \"</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token annotation punctuation\">@EnableAsync</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleCode</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">//Run</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">asyncNonBlockTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        asyncCodeTest<span class=\"token punctuation\">.</span><span class=\"token function\">asyncSum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//asyncNonBlockTest은 제어권을 바로 반환 받습니다</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = 귀요미지..\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//메인 프로세스의 다른 작업들 대신 사용하였습니다 </span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</br>\n<h4>실행결과</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.....\n1 + 1 = 귀요미지..\n1 + 1 = 2</code></pre></div>\n<br/>\n<p>메인 프로세스는 asyncSum 호출했지만 바로 제어권을 받아서 <code class=\"language-text\">1 + 1 = 귀요미지...</code>를 출력했습니다<br>\n그리고 여기서는 Thread.sleep(1000)을 사용하였지만 메인 프로세스의 작업들이라고 생각해 주시기 바랍니다  </p>\n<div class=\"gatsby-highlight\" data-language=\"textbox\"><pre class=\"language-textbox\"><code class=\"language-textbox\">Thread.sleep(1000)을 한 이유는 메인프로세스는 asyncSum을 호출 했지만 완료에  \n관심을 갖지 않기 때문에 메인 프로세스가 asyncSum() 완료와 상관없이 먼저 종료 될 수 있습니다</code></pre></div>\n<br/>\n<h4>한마디더</h4>\n<p>다른 건 이해하지 못하더라도 async<em>nonBlocking은 꼭 알아두셔야 합니다<br>\n위에서 언급했지만 async</em>nonBlocking은 가장 효율적인이며 이상적인 구조입니다<br>\n<strong><em>Reactive Programing is built around the core pillars of being fully asynchronous and non-blocking</em></strong></p>\n<hr>\n<h2>비동기 블로킹 (Async_Blocking)</h2>\n<p><strong><em>메인 프로세스에서 제어권이 넘어갔지만 호출된 기능의 완료에 관심을 갖지 않습니다</em></strong></p>\n<p><strong>그림을 다시한번 보시겠습니다</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 805px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0aedf1acf6f8825b5b6d97bb40012bb2/b98f1/async_blocking.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABcRAAAXEQHKJvM/AAACC0lEQVQoz2NgIACc21diExYFYmkoLclADOCVUmQwSmsAszUCUzmMUuslDRIrJSyLJ4opOgdrSRrZm8nZeOuJ61tbaQZnyJpmtYoZptRK4DRQVNuMIeXkH0YQ23v6XtOkY9+npZz62xWz88XEkJWXp0Zsuj8heMXlKWFrb05KOPipL/n4z96kYz968boybN0tJhDtM+uAWdrZ/9OBmvoTD3+eGLv75ZToHU+nxex8PhWEgRb3p5353596+n8/XgP///8Ppr1n7AcZODV0w71pERsez0k5/n9K6Mpb8xL2fZ2edOjXtOh9r2emnP7bl3rqXx+yfjYgZgdiTiDmAmIOYXVDEJvBd9ZBs9Qz/6eFzTo4N2LlldmpZ//3JZ/4PSHlxJ8JQG9O9N12fkHyyV8gF6IYCIo1PSBWBmI1IFZl4eDSBtLcAbMPmaRc+z+lILttY/aUHQtTb//vzDj/vyf9wv+elDN/+vx3XZ4LNHACuoEYYAvUyz5ALwNdODVkyfmZEWtuz47a+mx64MKz80JX3Zwdu+fdNK/NJxclnfjRD/Qy/kiBxbLPrIMW6ef/zw5dc3NexIZHCxMOfJ0dtfnJgrhd7+YmHv4xK/bwe1AwTAGG8xSchnEKizMkHPoENtC9f7Nu4pGvtaGrr9ZEbLpbnXT8R2nS0W+liUe+lCUc/FiWePBzWfz+9xUgDADrK/2M85Y6eQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"async_blocking\"\n        title=\"async_blocking\"\n        src=\"/static/0aedf1acf6f8825b5b6d97bb40012bb2/b98f1/async_blocking.png\"\n        srcset=\"/static/0aedf1acf6f8825b5b6d97bb40012bb2/07e12/async_blocking.png 240w,\n/static/0aedf1acf6f8825b5b6d97bb40012bb2/5ca43/async_blocking.png 480w,\n/static/0aedf1acf6f8825b5b6d97bb40012bb2/b98f1/async_blocking.png 805w\"\n        sizes=\"(max-width: 805px) 100vw, 805px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span class=\"img_caption\"> <b> Async_Blocking </b> </span></p>\n<p>저에게는 가장 어려운 개념이었습니다<br>\n제어권이 상대에게 있는데 완료에 관심을 갖지 않는다는게 생각되지 않았기 때문입니다<br>\n그래서 결론 내리길 핵심은 콜백을 받는 입장으로 대기한다라고 생각합니다</p>\n<h4>Sample Source</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Async</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AsyncCodeTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Async</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">asyncSum</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AsyncResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token annotation punctuation\">@EnableAsync</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleCode</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">//Run</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">asyncBlockTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> sumResult <span class=\"token operator\">=</span> asyncCodeTest<span class=\"token punctuation\">.</span><span class=\"token function\">asyncSum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//asyncBlockTest은 제어권을 바로 반환 받습니다 -> 여기서는 nonBlocking으로 해석이 가능합니다</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = \"</span> <span class=\"token operator\">+</span> sumResult<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//isDone()의 상태를 모르고 get()하여 대기(blocking)합니다 -> async</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1 + 1 = 귀요미지..\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</br>\n<h4>실행결과</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1 + 1 = 2\n1 + 1 = 귀요미지..</code></pre></div>\n<br/>\n<p>아까와 같은 Future의 get()을 써서 헷갈리실 수 있지만 엄연히 다른 개념으로 보셔야 합니다<br>\n아까는 메인 프로세스가 isDone()으로 asyncSum의 상태를 계속 해서 확인한 반면 지금은 단순히 get()을 호출하고 asyncSum에서 값을 return 할때 까지 단순히 대기 하고 있습니다<br>\n다시말해 get()을 호출하면 메인 프로세스는 blocking되며 asyncSum에서 값이 Pull 되기를 기다리게 됩니다<br>\n조금 쉽게 이야기하면 <strong><em>Async<em>NonBlocking에서 Blocking되는 상황이 생기면 Async</em>Blocking이 됩니다</em></strong>  </p>\n<p>대표적인 예가 JDBC입니다<br>\nJDBC는 blocking 방식으로 DB에 접근하게 되는데 비동기 환경에서 JDBC로 DB에 접근하게 되는 순간 이 프로세스는 <strong>async_blocking</strong>이 되는 것입니다 </p>\n<h4>하지만 판별의 핵심은</h4>\n<blockquote>\n<p><strong>1. 제어권의 판별</strong></p>\n<blockquote>\n<p>제어권이 메인 프로세스로 부터 Future의 get()을 호출 하므로 이관되어짐 = Blocking  </p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p><strong>2. 관심의 판별</strong>  </p>\n<blockquote>\n<p>메인 프로세스는 asyncSum가 완료되어 Callable로 Futrue의 get()에 값을 주길 기다림 = sync </p>\n</blockquote>\n</blockquote>\n<hr>\n<h2>마무리</h2>\n<p>저는 동기(Synchronous)와 비동기(Asynchronous) &#x26; 블로킹(Blocking)과 논블로킹(NonBlocking)을 이해하면서 많은 어려움이 있었습니다<br>\n이해 했다가도 다시 볼수록 더 헷갈리고 이해가 안되는 부분이 많았습니다<br>\n공부를 하면서 이런저런 자료를 뒤지던중 많은 자료들을 볼 수 있었고 관련 내용에 대한 많은 토론도 볼 수 있었습니다<br>\n그리고 포스팅을 하면서 지금 제가 내린 <strong>결론은 정답은 없다</strong> 입니다  </p>\n<p>위의 예시도 부분부분적으로 코드를 나눠보면 다른 개념들로 충분히 해석되어 질 수 있습니다<br>\n그러므로 해당 개념들을 간단히 보시고 Synchronous의 개념과 Blocking의 개념이 다르구나를 생각해 주시고<br>\n궁긍적으로 <strong><em>Asynchronous_NonBlocking</em></strong>으로 프로그래밍 패러다임이 이동한다는 것에 집중하시는게 더 좋을 꺼 같습니다</p>","excerpt":"사건의 발단얼마전 Reactive Programing을 공부하면서 백기선님의 유튜브를 보다 문득 의문이 생기는 부분이 있었습니다\"asynchronous하면 당연히 non-blocking…","frontmatter":{"title":"동기(Synchronous)와 비동기(Asynchronous) & 블로킹(Blocking)과 논블로킹(NonBlocking)","date":"2019-09-06","tags":["Spring","SpringBoot","Notion"],"keywords":["synchronous","asynchronous","async","sync","동기","비동기","blocking","non blocking","블로킹","논블로킹"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blocking_nonBlocking_synchronous_asynchronous/","previous":{"fields":{"slug":"/observer_pattern/"},"frontmatter":{"title":"Observer Pattern","tags":["DesignPattern"],"published":true}},"next":null}}}