<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="google-site-verification" content="_rVJuueG9dPQsjnBpN7bhY8QW5HU9HQz-7xYVzRUBaM"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, minimum-scale=1, maximum-scale=2"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:Catamaran;font-weight:800;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.2;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:56px;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:20px;color:inherit;font-family:Catamaran;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.2;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:6px;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:2px;}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#0687f0;text-decoration:none;box-shadow:none;}a:hover,a:active{text-decoration:underline;}a.gatsby-resp-image-link{box-shadow:none;text-decoration:none;}a:hover{text-decoration:none;}</style><style data-href="/styles.1eba1bcc5d7fd3a7e784.css" id="gatsby-global-css">@import url(https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css);@font-face{font-family:Noto Sans KR;font-style:normal;font-display:swap;font-weight:100;src:local("Noto Sans KR Thin "),local("Noto Sans KR-Thin"),url(/static/noto-sans-kr-latin-100-2de137ca3e12ea146ee47485a97f1e78.woff2) format("woff2"),url(/static/noto-sans-kr-latin-100-b965647685dd9fc531d1f8a1cc25e024.woff) format("woff")}@font-face{font-family:Noto Sans KR;font-style:normal;font-display:swap;font-weight:300;src:local("Noto Sans KR Light "),local("Noto Sans KR-Light"),url(/static/noto-sans-kr-latin-300-4f773a0fce88aa857d70b56c5b0a1d26.woff2) format("woff2"),url(/static/noto-sans-kr-latin-300-ee87751dac814562bac316d848e35748.woff) format("woff")}@font-face{font-family:Noto Sans KR;font-style:normal;font-display:swap;font-weight:400;src:local("Noto Sans KR Regular "),local("Noto Sans KR-Regular"),url(/static/noto-sans-kr-latin-400-be09f2ced7ff9fa6eda5f0416e2fc840.woff2) format("woff2"),url(/static/noto-sans-kr-latin-400-4c50be0fe5b21a153b8e40a392c2d3fe.woff) format("woff")}@font-face{font-family:Noto Sans KR;font-style:normal;font-display:swap;font-weight:500;src:local("Noto Sans KR Medium "),local("Noto Sans KR-Medium"),url(/static/noto-sans-kr-latin-500-416698c2fc4b3951f8d63d3d2ae23900.woff2) format("woff2"),url(/static/noto-sans-kr-latin-500-28601458e118110e494903a1fcd6dcf5.woff) format("woff")}@font-face{font-family:Noto Sans KR;font-style:normal;font-display:swap;font-weight:700;src:local("Noto Sans KR Bold "),local("Noto Sans KR-Bold"),url(/static/noto-sans-kr-latin-700-04e782e08729f3725ae5a9c95da0c8ba.woff2) format("woff2"),url(/static/noto-sans-kr-latin-700-b9e989a96027f839a9569d2d011e0b71.woff) format("woff")}@font-face{font-family:Noto Sans KR;font-style:normal;font-display:swap;font-weight:900;src:local("Noto Sans KR Black "),local("Noto Sans KR-Black"),url(/static/noto-sans-kr-latin-900-c41f1395489a117ca36d550142a1695f.woff2) format("woff2"),url(/static/noto-sans-kr-latin-900-589f5fbf84d9dc9984a969bae969fd60.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:100;src:local("Catamaran Thin "),local("Catamaran-Thin"),url(/static/catamaran-latin-100-6473cfe10b779f968c3d41708e4dfa70.woff2) format("woff2"),url(/static/catamaran-latin-100-a2eb4ef6ac1cc8ff5a51d62c01fe2fea.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:200;src:local("Catamaran Extra Light "),local("Catamaran-Extra Light"),url(/static/catamaran-latin-200-d005aac0ee52a3cb2261ea79a93d4e04.woff2) format("woff2"),url(/static/catamaran-latin-200-fbc8307e859bc6f8866a36e084fdcb3b.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:300;src:local("Catamaran Light "),local("Catamaran-Light"),url(/static/catamaran-latin-300-62b414e71a1f15fa797f91bbf8a3f124.woff2) format("woff2"),url(/static/catamaran-latin-300-7c000b951ef8e9a2b791e70d678dd263.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:400;src:local("Catamaran Regular "),local("Catamaran-Regular"),url(/static/catamaran-latin-400-2175f69a7b7f93cc707ffb96264af4aa.woff2) format("woff2"),url(/static/catamaran-latin-400-2de7e6f54ec70b29a1b4541beba00c89.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:500;src:local("Catamaran Medium "),local("Catamaran-Medium"),url(/static/catamaran-latin-500-f1dd472e80352ac073661af4c1f612dc.woff2) format("woff2"),url(/static/catamaran-latin-500-b7668eb8c9c0df2d0cbe5f77616a8ea8.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:600;src:local("Catamaran SemiBold "),local("Catamaran-SemiBold"),url(/static/catamaran-latin-600-15d0af50791a8286c40ffd0e51bd94c7.woff2) format("woff2"),url(/static/catamaran-latin-600-10467dab56671e7aa6f043987d44dcb8.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:700;src:local("Catamaran Bold "),local("Catamaran-Bold"),url(/static/catamaran-latin-700-4a133d839202a1733fd3e50dab1597dc.woff2) format("woff2"),url(/static/catamaran-latin-700-09314a5449726c9e36e6453e9661fe46.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:800;src:local("Catamaran ExtraBold "),local("Catamaran-ExtraBold"),url(/static/catamaran-latin-800-f6053867cb0122b6897b017da49d0009.woff2) format("woff2"),url(/static/catamaran-latin-800-cb812de767a624c9d405058e05731b3f.woff) format("woff")}@font-face{font-family:Catamaran;font-style:normal;font-display:swap;font-weight:900;src:local("Catamaran Black "),local("Catamaran-Black"),url(/static/catamaran-latin-900-0e80350f234f47318f42c4ef8f4f47b9.woff2) format("woff2"),url(/static/catamaran-latin-900-6f7344e59325277678d79578eb0a2554.woff) format("woff")}.custom-hr{margin:64px;background:linear-gradient(72deg,#2c6975,#edecde);border:none;height:2px}.github{float:right;padding:14px;opacity:.6}.top{position:relative;width:100%;height:60px;background:linear-gradient(72deg,#2c6975,#edecde)}.top .link{display:inline-block;font-size:28px;padding-top:8px;color:#fff;opacity:.7;margin-left:20px;font-family:Catamaran;font-weight:800}.home-header{margin-top:0;border-bottom:none;font-weight:900;font-size:48px;letter-spacing:-2px}.link{box-shadow:none;text-decoration:none;color:inherit}.switch-container{text-align:right}.switch-container .icon{text-align:center;color:#222;font-size:14px;font-weight:900}.footer{padding-top:52px;text-align:center;font-size:12px}.footer a{text-decoration:none!important}body .main-container{max-width:60vw}@media screen and (max-width:50em){body .main-container{max-width:39rem}}body .main-container .code_header{margin-top:1rem;display:inline-block;font-weight:600}body .main-container .sub_header{font-size:.8rem}body .main-container .img_caption{font-style:normal;display:inherit;text-align:center;font-size:90%;margin-bottom:2rem}body .main-container .category-container{margin-bottom:1.5rem}body .main-container .category-container .MuiInputBase-input{padding:6px 0 5px}.post-date{text-align:right;font-size:12px;font-style:italic}.resp-sharing-button--facebook:hover{background-color:#2d4373}.resp-sharing-button--facebook{background-color:#3b5998;border-color:#3b5998}.resp-sharing-button--facebook:active,.resp-sharing-button--facebook:hover{background-color:#2d4373;border-color:#2d4373}.resp-sharing-button--twitter:hover{background-color:#2795e9}.resp-sharing-button--twitter{background-color:#55acee;border-color:#55acee}.resp-sharing-button--twitter:active,.resp-sharing-button--twitter:hover{background-color:#2795e9;border-color:#2795e9}.social-share{text-align:right;height:100%}.resp-sharing-button__icon,.resp-sharing-button__link{display:inline-block;vertical-align:middle;border:none}.resp-sharing-button__link{text-decoration:none;color:#fff;margin:4px;height:33px}.resp-sharing-button__link .service-label{font-size:12px;padding-right:4px}.resp-sharing-button{height:33px;border-radius:6px;transition:25ms ease-out;padding:3px 8px 3px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.resp-sharing-button__icon svg{width:1em;height:1.5em;margin-right:.4em;vertical-align:top}.resp-sharing-button__icon{stroke:#fff;fill:none}.resp-sharing-button__icon--solid{fill:#fff;stroke:none}.sponsor-button{text-align:right;margin:4px}.sponsor-button .bmc-button{display:inline-block;padding:0 7px;width:133px;height:33px;text-decoration:none;background-color:#bb5794;color:#fff;border:1px solid transparent;border-radius:6px;letter-spacing:-.08px;box-sizing:border-box;font-size:12px;line-height:30px;text-align:left}.sponsor-button .bmc-button:active,.sponsor-button .bmc-button:hover{background-color:#a0457d}.sponsor-button .bmc-button img{width:20px;margin-bottom:1px;box-shadow:none;border:none;vertical-align:middle}.sponsor-button .bmc-button span{margin-left:6px}.bio{margin-bottom:24px}.bio .author-description{display:flex}.bio .author-image{margin-top:12px;margin-right:12px;margin-bottom:0;min-width:72px}.bio .author-name-prefix{font-size:90%;margin-right:4px}.bio .author-name-content{display:inline-block;font-size:95%;padding:2px 6px;font-weight:bolder;border-radius:8px;-webkit-transform-origin:center;transform-origin:center;-webkit-animation:flutter 2s linear infinite;animation:flutter 2s linear infinite}.bio .author-introduction{margin-top:4px;font-size:80%;line-height:1.4}.bio .author-socials{margin-top:4px}.bio a{margin-right:8px;font-size:80%}.bio a.visited{text-decoration:none}@-webkit-keyframes flutter{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}35%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}40%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}65%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@keyframes flutter{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}35%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}40%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}65%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.category-container{display:flex;top:0;line-height:0;white-space:nowrap;-ms-overflow-style:none;overflow:-moz-scrollbars-none;z-index:1;padding:6px 20px;box-sizing:content-box;margin-top:50px}.category-container .filter-button{width:15rem;background:linear-gradient(45deg,#fe6b8b 30%,#ff8e53 90%);border-radius:3px;border:0;color:#fff;height:40px;padding:0 30px;box-shadow:0 3px 5px 2px rgba(255,105,135,.3)}.category-container .search-filter{margin-top:5px;margin-bottom:0;margin-left:5vw}.category-container .search-filter>label{top:-13px}.category-container .search-filter>div{margin-top:5px}.category-container .search-filter .MuiFormLabel-root.Mui-focused{color:#fe6b8b}.category-container .search-filter .MuiInput-underline:after{border-bottom:2px solid #fe6b8b}.category-container .search-filter .MuiInputLabel-shrink{-webkit-transform:translateY(8px) scale(.7);transform:translateY(8px) scale(.7)}.category-container .search-filter .MuiInputBase-input{padding:6px 0 5px}.category-container .search-filter .MuiAppBar.root{box-sizing:border-box}.category-container::-webkit-scrollbar{display:none}.thumbnail-container{min-height:calc(100vh - 3.5rem)}.thumbnail{display:block;margin-bottom:12px;padding:4px 4px 12px;box-shadow:none;transition:text-shadow .3s,opacity .4s;opacity:0}.thumbnail p{font-size:90%;line-height:1.4}.thumbnail.visible{opacity:1}.navigator{margin:40px 0;display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0}.navigator li{margin-bottom:12px}.navigator a{padding:7px 16px 8px;border-radius:6px;font-size:12px;opacity:.8}.gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1.2em;margin-left:-1.2em;padding-right:1em;padding-left:.75em;border-left:.35em solid #ff609a}.gatsby-highlight .language-textbox code{border-radius:5px;color:#383838}.gatsby-highlight pre[class*=language-textbox]{background-color:#f8f8f8;border:1px solid #ccc}.gatsby-highlight pre[class*=language-]{border-radius:5px;display:flex;margin-top:0}.gatsby-highlight pre[class*=language-] code[class*=language-]{flex:1 1}code[class*=language-],pre[class*=language-]{color:#e0e0e0;background:none;font-family:Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.6;font-size:15px;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;-ms-overflow-style:none;overflow:-moz-scrollbars-none}li code[class*=language-text],p code[class*=language-text]{font-weight:600}pre[class*=language-]::-webkit-scrollbar{display:none}pre[class*=language-]{padding:1.2em;margin:1.5em 0;overflow:auto;border-radius:.6em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#212121}:not(pre)>code[class*=language-]{padding:.1em .6em;border-radius:.2em;white-space:normal;background:#e0ecde;color:#205072;border:1px solid}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#616161}.token.punctuation{color:#e0e0e0}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#ff9100}.token.class-name,.token.constant,.token.property,.token.symbol{color:#ff0}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#b388ff}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#00e676}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}body.light{background-color:#fff;text-shadow:0 0 .1px rgba(0,0,0,.3);padding-right:0!important}body.light .home-header{color:#333}body.light .bio .author-name-content{background-color:#ecf0f2}body.light .bio .author-introduction{color:#7d7d7d}body.light .bio a{color:navy}body.light .thumbnail h3{color:#333}body.light .thumbnail p{color:#7d7d7d}body.light .thumbnail:hover{text-shadow:0 0 6px rgba(0,0,0,.2)}body.light .footer{color:#aaa}body.light .footer a{color:#333}body.light .navigator a{background-color:#fceff7;color:#cc007a}body.light blockquote{color:rgba(0,0,0,.8)}body.light .red_font{color:#cc007a;font-weight:700}body.dark{background-color:#282c35;text-shadow:0 0 .1px hsla(0,0%,100%,.3);padding-right:0!important}body.dark,body.dark .home-header{color:#eee}body.dark .bio .author-name-content{background-color:#383636}body.dark .bio .author-introduction{color:#d8d7d7}body.dark .bio a{color:#bb72ec}body.dark .category-container .MuiInputBase-input{color:#eee}body.dark .category-container .MuiFormLabel-root{color:#fff}body.dark .category-container .MuiInput-underline:before{border-bottom:1px solid #fff}body.dark .thumbnail h3{color:#eee}body.dark .thumbnail p{color:#d8d7d7}body.dark .thumbnail:hover{text-shadow:0 0 6px hsla(0,0%,100%,.2)}body.dark .footer{color:#d8d7d7}body.dark .footer a{color:#fff}body.dark blockquote{border-left:4px solid hsla(0,0%,100%,.822);color:#d8d7d7}body.dark h1,body.dark h2{border-bottom-color:hsla(0,0%,100%,.3)}body.dark .navigator a{background-color:#fceff7;color:#cc007a}body.dark .red_font{color:#cc007a;font-weight:700}body{font-family:Noto Sans KR,sans-serif;font-size:108%;background-color:#fff;-webkit-text-size-adjust:antialiased;-moz-osx-font-smoothing:grayscale;transition:background-color .3s,color .3s}body .about{max-width:60vw}body .about td:first-child{font-weight:700;font-family:Noto Sans KR,sans-serif;width:10rem;text-align:right}@media screen and (max-width:50em){body .about{max-width:39rem}}body .about .code_header{margin-top:1rem;display:inline-block;font-weight:600}body .about .sub_header{font-size:.8rem}body .about .img_caption{font-style:normal;display:inherit;text-align:center;font-size:90%;margin-bottom:2rem}body .about .category-container{margin-bottom:1.5rem}body .about .category-container .MuiInputBase-input{padding:6px 0 5px}body .about li{color:#333}body .about .red_font{color:#cc007a;font-weight:700}</style><meta name="generator" content="Gatsby 2.32.13"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="icon" href="/favicon-32x32.png?v=7de2c6419ac8527cc802fdc3ca98acd0" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=7de2c6419ac8527cc802fdc3ca98acd0"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">[DataStructure] HashMap, HashTable과 ConcurrentHashMap 차이점 | renuevo blog</title><meta data-react-helmet="true" name="description" content="Map 인터페이스에 대한 내부구조 알아보기 약간의 사연이 있어서 😢 편리하게 사용하고 있는 Map관련 내부구조를 다시 보고 정리하면서 확인해 보려고 합니다 HashMap (해시맵) Hash 알고리즘 먼저 key를 저장하는 hash와 관련된 내용부터 살펴 보겠습니다 기본적으로 key의 hashCode() 값을 기반으로 보조 해시함수로 비트연산자를 활용하여 계산합니다 hashCode()의 경우 char를 돌면서 3…"/><meta data-react-helmet="true" property="og:title" content="[DataStructure] HashMap, HashTable과 ConcurrentHashMap 차이점"/><meta data-react-helmet="true" property="og:description" content="Map 인터페이스에 대한 내부구조 알아보기 약간의 사연이 있어서 😢 편리하게 사용하고 있는 Map관련 내부구조를 다시 보고 정리하면서 확인해 보려고 합니다 HashMap (해시맵) Hash 알고리즘 먼저 key를 저장하는 hash와 관련된 내용부터 살펴 보겠습니다 기본적으로 key의 hashCode() 값을 기반으로 보조 해시함수로 비트연산자를 활용하여 계산합니다 hashCode()의 경우 char를 돌면서 3…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="deokhwa kim"/><meta data-react-helmet="true" name="twitter:title" content="[DataStructure] HashMap, HashTable과 ConcurrentHashMap 차이점"/><meta data-react-helmet="true" name="twitter:description" content="Map 인터페이스에 대한 내부구조 알아보기 약간의 사연이 있어서 😢 편리하게 사용하고 있는 Map관련 내부구조를 다시 보고 정리하면서 확인해 보려고 합니다 HashMap (해시맵) Hash 알고리즘 먼저 key를 저장하는 hash와 관련된 내용부터 살펴 보겠습니다 기본적으로 key의 hashCode() 값을 기반으로 보조 해시함수로 비트연산자를 활용하여 계산합니다 hashCode()의 경우 char를 돌면서 3…"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-903f659ab042168d7448.js"/><link as="script" rel="preload" href="/framework-9252bfa5ea71b588207d.js"/><link as="script" rel="preload" href="/app-ebf0294f0ed7a67bde7b.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/133dca110fad53aa1997b630637bbac3134a2d14-a18cb3de793a9cd4c3b2.js"/><link as="script" rel="preload" href="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-2ebf920bd49eb6dc674f.js"/><link as="script" rel="preload" href="/cd7d5f864fc9e15ed8adef086269b0aeff617554-6341a6960d46b1cc0197.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-f135ee67b10d289fc836.js"/><link as="fetch" rel="preload" href="/page-data\data-structure\map-interface\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/96099027.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="top"><a class="link" href="/">renuevo blog</a><a href="https://github.com/renuevo" class="github" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></div><div style="margin-left:auto;margin-right:auto;padding:2.4375rem 1.21875rem" class="main-container"><div class="switch-container"><label for="normal-switch"><div style="position:relative;display:inline-block;text-align:left;opacity:1;direction:ltr;border-radius:12px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:24px;width:48px;margin:0;position:relative;background:#d9dfe2;border-radius:12px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:24px;width:26px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon checkedIcon">D</div></div><div style="height:24px;width:26px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon uncheckedIcon">L</div></div></div><div class="react-switch-handle" style="height:22px;width:22px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(1px);top:1px;outline:0;border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px" id="normal-switch"/></div></label></div><h1>[DataStructure] HashMap, HashTable과 ConcurrentHashMap 차이점</h1><p class="post-date">July 30, 2022</p><div><p><strong><em>Map 인터페이스에 대한 내부구조 알아보기</em></strong><br>
약간의 사연이 있어서 😢<br>
편리하게 사용하고 있는 Map관련 내부구조를 다시 보고 정리하면서 확인해 보려고 합니다</p>
<br/>
<h2 id="hashmap-해시맵" style="position:relative;"><a href="#hashmap-%ED%95%B4%EC%8B%9C%EB%A7%B5" aria-label="hashmap 해시맵 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HashMap (해시맵)</h2>
<h3 id="hash-알고리즘" style="position:relative;"><a href="#hash-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98" aria-label="hash 알고리즘 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hash 알고리즘</h3>
<p>먼저 key를 저장하는 hash와 관련된 내용부터 살펴 보겠습니다</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token comment">//String.java의 JDK11 기준 -> jdk8부터는 큰 차이가 없습니다  </span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> hash<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hash <span class="token operator">=</span> h <span class="token operator">=</span> <span class="token function">isLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token class-name">StringLatin1</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
                              <span class="token operator">:</span> <span class="token class-name">StringUTF16</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> h<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Lation1</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">byte</span> v <span class="token operator">:</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        h <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> h <span class="token operator">+</span> <span class="token punctuation">(</span>v <span class="token operator">&amp;</span> <span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> h<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//UTF16</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> value<span class="token punctuation">.</span>length <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        h <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> h <span class="token operator">+</span> <span class="token function">getChar</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> h<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//해시 보조</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">>>></span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>기본적으로 key의 hashCode() 값을 기반으로 보조 해시함수로 비트연산자를 활용하여 계산합니다</p>
<br/>
<p>hashCode()의 경우 char를 돌면서 31을 곱하면서 계산합니다<br>
짝수를 곱할 경우 내부연산에서 곱을 왼쪽으로 이동하는 쉬프트 연산으로 계산하면서<br>
overflow가 되고 0만 가득차게 될 수 있기 때문에 홀수와 소수인 31을 관행적으로 사용한다고 합니다</p>
<br/>
<p>보조해시 함수를 <code class="language-text">test</code>를 예를 들어 설명하겠습니다</p>
<blockquote>
<ol>
<li>test의 hashCode()는 3556498이고 bit값은 <code class="language-text">1101100100010010010010</code>입니다</li>
<li>bit연산으로 (h >>> 16)으로 앞의 6자리만을 남깁니다 <code class="language-text">110110</code></li>
<li>1번과 2번의 값을 xor 연산하여 3556516을 도출합니다 <code class="language-text">1101100100010010100100</code></li>
</ol>
</blockquote>
<p>보는 것과 같이 hash 함수가 엄청 간단합니다</p>
<br/>
<p>이렇게 간단하게 구현된 해시값이 겹치지 않을까요!? 👉 <strong>물론 겹칠 수 있습니다</strong><br>
이전에는 보다 복잡한 보조해시를 썼지만 hashCode() 자체의 알고리즘 개선과 효율성 측면에서 간단하게 계산합니다<br>
법그래서 별도의 <strong>Separate Chaining(분리 연결법), Open Addressing(개방 주소)</strong>
으로 <a href="https://renuevo.github.io/data-structure/map-interface/#hash-collision%ED%95%B4%EC%8B%9C-%EC%B6%A9%EB%8F%8C" target="_blank" rel="nofollow noopener noreferrer">해시 충돌</a>을 예방합니다</p>
<br/>
<br/>
<h3 id="hashmap의-내부-구조" style="position:relative;"><a href="#hashmap%EC%9D%98-%EB%82%B4%EB%B6%80-%EA%B5%AC%EC%A1%B0" aria-label="hashmap의 내부 구조 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HashMap의 내부 구조</h3>
<p>저장되는 데이터 구조를 살펴보겠습니다</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">float</span> DEFAULT_LOAD_FACTOR <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
    <span class="token class-name">V</span> value<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    
<span class="token punctuation">}</span>

<span class="token comment">//Red-Black Tree</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">LinkedHashMap<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
    <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> parent<span class="token punctuation">;</span>  <span class="token comment">// red-black tree links</span>
    <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> left<span class="token punctuation">;</span>
    <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> right<span class="token punctuation">;</span>
    <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> prev<span class="token punctuation">;</span>    <span class="token comment">// needed to unlink next upon deletion</span>
    <span class="token keyword">boolean</span> red<span class="token punctuation">;</span>
    <span class="token class-name">TreeNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> val<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre></div>
<p>저장 데이터 단위는 Node로 구성되어 있습니다<br>
HashMap은 처음 생성될시에 기본적으로 16개의 Node를 저장할 수 있는 배열저장소를 내부에 생성합니다<br>
이걸 <code class="language-text">Buckets</code>이라고 부릅니다</p>
<br/>  
<p><strong>HashMap의 내부 운영 방식</strong></p>
<ol>
<li><strong>Buckets 사이즈 조절</strong><br>
이전에 알아본 hash값을 기반으로 <code class="language-text">(table.length - 1) &amp; hash</code> buckets내의 자리를 찾고 그곳에 Node를 저장하게 됩니다<br>
이후 16개의 DEFAULT_LOAD_FACTOR(75%)비율이 차게되면 buckets값을 2배 늘리고 값을 재분배하는 과정을 거칩니다</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 72.83236994219652%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD90lEQVQ4y32SC0xbVRjHvz4GzJg4p5G4ucXFMSePYWwWHIIyHBkxYozGjETNYrLpdBGHWVYYxsHWOh5jKziEDkwty8rK2Ag4IiCvDkcLLSt9XPq4t7dvoPS1YhnPcDxX8RGz7CS/fDnfueef//3+B+DfxVrnv/tHLdZDeOTHsCEu5gUOl5PL2cDN4OW+zmF6+YfzWeXflz/0cmZ25j/9jZhkzMuYJ9d7z6/vMzEZmF0cFot7vUsKFXXnmPMtTG+dFMy2vWl716+mpGyEuLhUiIlJZ23e/MwO3HpiS/z2V995Myf743ez3sh/OyctLzsL2BBLB7yxKtPEY6/tz9iXyks9xEvj5e15Zc/76VnpB0USETaGEIDBAMDnAxQUAFy+AnkoDF4Ufbr9gd58K6oLtc/rf+9YMI58mHMQJhzjl7qGO0nCQxDOiHOODtEB55xzlgpQKx19HZ8wgk/B4mIChEI7IRhMiPX7EmAJbT8dJXe3hTSB1pAGtYbHUbNrmMLGd0ivmRslzSaqiZR6G6z1SGwRI9GYCImtYnRh7MJRRrACHA4EdvsSrqssgliBQBDtjgYK5WQPJXEq0BVzD2qy9pmAC9tEF93iivMW6ju62lms46My29nVU+pTy6VkKSrRlxwBWFuLh7m5ZFhZeQkWFhJjlpeSYA3t+ipAJMn9ozM/Uv2o0dKLfnIozEwA4kZL7Q/1hLbWVO+q0lWiGmvtWuW9ytVqYzUSKAVHGIfZEA6XgcdTDF7vabadLoHog5LcJf+Ba3S/W+oeRm0RLboRHjcdey8fz1Df8MvdntkJ58SUJWBBJp8JmQPmP2vnUOenjGARTE/PAkGQ+LdtLKORgvsRT1LI+1mro98ux/OTB9UMRNW9W7FiScMm2e3rzwpFwp2Ci+eSTn57MrWorChFcEmQfKLkxKa/Uv7fqkjbCt0L+q1tc1pfa5gJRYMdaiafw2dau+qtrt/aC9WE+msDZRCojWqh1qI9qyN15Tdv3+QBnt032FkEO3QBSXpYNO0Gl9ufFJn5vMXaTTdPjSCZT4Vk00pmhmyV0dLU2T88+6u1b17hUqAhHNqAbQANOgbR1cGrXzKC+8HlOgM0zQens4jtdheD21ucMz99oM034mBmKLEPIgk9SGDBxLrL3sYakd1aZa8hSyfPrApJ4Tz/Lj8qpISo1FiK3+HyMmAxAJMJgMJPzeaAF90k2PwD8Xh+izgMdOP+OBOKp/u8FLS2ybqfh3o9CvOdiNKuRCP0CPq7ynplxxmHbJia4uKUuUyNn8HVhdj1Yd3jrUH1RziMo/LA2DHMB8hiALPPsE+h6z90R6M4PGocLVDpVccxXyj1ysKW9pbEPwC0CU6hoqIzpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="hash buckets"
        title="hash buckets"
        src="/static/ea030c85da279b0df066a730b73f0e6e/1e043/hash-bucket.png"
        srcset="/static/ea030c85da279b0df066a730b73f0e6e/991de/hash-bucket.png 173w,
/static/ea030c85da279b0df066a730b73f0e6e/e4d6b/hash-bucket.png 345w,
/static/ea030c85da279b0df066a730b73f0e6e/1e043/hash-bucket.png 690w,
/static/ea030c85da279b0df066a730b73f0e6e/e3189/hash-bucket.png 1035w,
/static/ea030c85da279b0df066a730b73f0e6e/21b4d/hash-bucket.png 1280w"
        sizes="(max-width: 690px) 100vw, 690px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span>
<span class='img_caption'>Source : <a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="nofollow noopener noreferrer">Hash Table Wiki</a> </span></p>
<br/>  
<ol start="2">
<li><strong>Linked List</strong><br>
Node를 보시면 <code class="language-text">Node&lt;K,V> next</code>를 보실 수 있습니다<br>
key의 hash가 같은 Buckets 인덱스에 할당되면 key를 확인하고 다른 값이면 Linked List로 다음 Node로 해당 값을 저장합니다<br>
이런 방식을 Separate Chaining(분리 연결법)이라고 합니다 👉 밑에서 자세히 살펴 보겠습니다</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 68.78612716763006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADsElEQVQ4y3WTbUybVRTHT0GgUCgTnVETZyTzE8z5QeMIicbNZC4ajGXZsmxMkmVbZhbXhqVloe8tlL4TDCOZToPLOl9Ii91oh6V1MATC21poV1YrgwqTAgMCsi1m7vF/u5qoiU9ycu+597m/+z/n3EP0ny83L5c4jkvZ/B/zPDb+/VWaKqllrYVOfHfiX2cOnj1IzavNpBxTpleKirKpoIBPTidRGtYT+5Y2uElKA7NgT7DJPy7IyuJnCTYXb06t83H88V55OfOFsC12ttB2gSyGUzzzOSkluaFia6vywyMfHdlfUJgvqFBWpA5VtVaxM5tgL8Hydp/eTbV9tRTgAnBDoQz8xctmOxyXmVaYCtUTiF7y9AeXHMGLndh+7kz/mTbLnGVAf0sfUIVUfsx9poQpoAlrAtqIdtAwZWgmevRIRouLIzQ93YVxqODBg8p0UE+2u+L+9u5xznbNEswm/iaxV/xy3WDddkmXpPT418e31XTXvCK7Ltt28vuTpbDt0l5pMQOW0MLCHpqc3EVLS+9uGRvbWkf09KenDlAk0bNnIOz75LLvymFckAngx4a4wai7qdOqQ2o95vr6WL1eF9VpodqI8SjRw4diWl0NUCLRTisrfrp/vwIKszmfg4Z/n/ugPxGWdnS5qgF8/lDroTrjtFGtvKGUI3xF/a16RUO8QQG4XDOh0QFYzcq2A8BqAPfTxkY1/K0A8pIIeaq2pnu0ScVZrjcFc5Divaa9u/A03pSPyN+QD8vLoLQMoDLFqGKHYkRRjnkJA1bR8vKXFI02Qd0XUPkOgHl8KHJKLnd8Y3OuSX6S/AiFGUi+GQp9AHQA6Db8YnA33m50Q2EH7AekoJGF/D6trWkBktK9e5qiubkyGdGzrMq9sdnP/Tej05euOdyC3PxnRMZKocQrKbQv2IXnufNCgIUojtCWtAnNs+bCY45jAlaU92hmRgWFpymZVOWvr7/+FMK14oWt/Ol5YSjkeNXjvlrC3p2sV+a1L9rjeCITCD1i/tUcMc4YI9qwdkIf1U9B7QUW8gG6e7eV4nEjcngW87dfI8phndB3I3rOPzp8+yt/W2dseZbHws7gZQhYh/6P5TDgTuRQDOBRhC6GX0qP20vgcCSuXuwMc6YBQz/8F6U90hbbvM2jn9Q7kTOX9Y7VBVUuVNcJld6GnxsaUr0LIAFIAKZ89fpvmabPrBS5My4djg26vH1eK2tXxZhip2nGtA9dIkKlRSiQCO9PpAqqROpx9T6A3/oLtDcDOlKGcSgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="hashmap buckets"
        title="hashmap buckets"
        src="/static/130e3347a853a23f466502dd9bd941a5/1e043/hashmap-bucket.png"
        srcset="/static/130e3347a853a23f466502dd9bd941a5/991de/hashmap-bucket.png 173w,
/static/130e3347a853a23f466502dd9bd941a5/e4d6b/hashmap-bucket.png 345w,
/static/130e3347a853a23f466502dd9bd941a5/1e043/hashmap-bucket.png 690w,
/static/130e3347a853a23f466502dd9bd941a5/e3189/hashmap-bucket.png 1035w,
/static/130e3347a853a23f466502dd9bd941a5/21b4d/hashmap-bucket.png 1280w"
        sizes="(max-width: 690px) 100vw, 690px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span>
<span class='img_caption'>Source : <a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="nofollow noopener noreferrer">Hash Table Wiki</a> </span></p>
<br/>
<ol start="3">
<li><strong>Red-Black Tree</strong><br>
Linked List로 값을 저장하면 탐색 시간이 늘어나기 때문에 값이 늘어나면 효율적이지 않습니다<br>
그래서 TREEIFY_THRESHOLD(8)로 연결이 늘어나게 되면 Node를 <code class="language-text">treeifyBin()</code>를 통해 TreeNode로 변경합니다<br>
그리고 효율적인 레드블랙트리 알고리즘으로 저장합니다</li>
</ol>
<p>👉 <a href="https://ko.wikipedia.org/wiki/%EB%A0%88%EB%93%9C-%EB%B8%94%EB%9E%99_%ED%8A%B8%EB%A6%AC" target="_blank" rel="nofollow noopener noreferrer">Red-Black Tree (레드블랙 트리) Wiki</a></p>
<br/>
<p><strong>다음으로 put의 코드를 살펴보겠습니다</strong></p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">,</span>
                   <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>  </span>            n <span class="token operator">=</span> <span class="token punctuation">(</span>tab <span class="token operator">=</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> tab<span class="token punctuation">[</span>i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>  </span>            tab<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>   <span class="token keyword">else</span> <span class="token punctuation">{</span>  </span>            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span></span><span class="gatsby-highlight-code-line">                <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                e <span class="token operator">=</span> p<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>       <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">TreeNode</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putTreeVal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> tab<span class="token punctuation">,</span> hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>                </span><span class="gatsby-highlight-code-line">  <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>       <span class="token keyword">else</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>                   <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">>=</span> TREEIFY_THRESHOLD <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// -1 for 1st</span></span><span class="gatsby-highlight-code-line">                            <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span></span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>
                        <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    p <span class="token operator">=</span> e<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// existing mapping for key</span>
                <span class="token class-name">V</span> oldValue <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent <span class="token operator">||</span> oldValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    e<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
                <span class="token function">afterNodeAccess</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token operator">++</span>modCount<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">></span> threshold<span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">            <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>        <span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre></div>
<p>생각보다 put의 소스 자체가 복잡해 보입니다<br>
여기서 주요 핵심부분을 8개로 나눠서 분류하고 하나씩 뜯어보겠습니다</p>
<br/>
<p><span class='red_font'>(1)</span> <code class="language-text">if ((tab = table) == null || (n = tab.length) == 0)</code></p>
<blockquote>
<p>처음 등장하는 조건문입니다<br>
buckets이 null 이거나 사이즈가 0인지를 체크하여 resize()를 통해 저장소를 생성합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(2)</span> <code class="language-text">if ((p = tab[i = (n - 1) &amp; hash]) == null)</code></p>
<blockquote>
<p>hash의 buckets내의 index를 계산하고 null일 경우 Node를 바로 저장하는 조건문입니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(3)</span> <code class="language-text">else</code></p>
<blockquote>
<p>hash의 buckets내의 index를 계산하고 null이 아닌 Node가 이미 들어 있는 경우입니다<br>
<span class='red_font'>(4), (5), (6)</span>을 통해 put을 진행합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(4)</span> <code class="language-text">if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</code></p>
<blockquote>
<p>hash와 key의 값을 비교하여 같은 key의 value 변경인지를 확인합니다<br>
같은 key로 확인되면 단순히 Node의 value값을 변경합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(5)</span> <code class="language-text">else if (p instanceof TreeNode)</code></p>
<blockquote>
<p>TreeNode 여부를 확인하여 Tree구조로 put을 진행합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(6)</span> <code class="language-text">else { for (int binCount = 0; ; ++binCount)</code></p>
<blockquote>
<p>Node의 Linked List를 탐색하며 put을 진행합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(7)</span> <code class="language-text">if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st</code></p>
<blockquote>
<p><span class='red_font'>(6)</span>의 탐색을 진행하며 binCount가 너무 늘어나 탐색이 느려지는 기준점 TREEIFY_THRESHOLD(8)에<br>
도달하게 된다면 <code class="language-text">treeifyBin(tab, hash);</code>를 통해서 Node를 TreeNode로 변경합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(8)</span> <code class="language-text">if (++size > threshold)</code></p>
<blockquote>
<p>마지막으로 buckets의 Node사이즈를 확인하여 resize() 여부를 결정합니다</p>
</blockquote>
<br/>
<p>이것으로 HashMap의 구조를 알아 봤습니다<br>
단순히 저장해서 가져다가 쓰기만 했었는데 생각보다 내부에서는 다양한 알고리즘이 반영된걸 알 수 있었습니다</p>
<br/>
<p>다음은 HashMap 이전에 존재했던 HashTable에 대해 알아보겠습니다</p>
<hr>
<br/>
<h2 id="hashtable-해시테이블" style="position:relative;"><a href="#hashtable-%ED%95%B4%EC%8B%9C%ED%85%8C%EC%9D%B4%EB%B8%94" aria-label="hashtable 해시테이블 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HashTable (해시테이블)</h2>
<p>다음으로 알아볼 것은 HashMap 이전에 사용된 HashTable 입니다<br>
그래서 기능적으로 많이 닮아 있으므로 다른 부분만을 빠르게 살펴 보겠습니다</p>
<p><strong>hash 알고리즘</strong><br>
hash 알고리즘은 기존 HashMap과 달리 보조 해시 없이 기본 hashCode()를 그대로 사용합니다</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">int</span> hash <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<br/>
<h3 id="hashtable의-내부-구조" style="position:relative;"><a href="#hashtable%EC%9D%98-%EB%82%B4%EB%B6%80-%EA%B5%AC%EC%A1%B0" aria-label="hashtable의 내부 구조 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HashTable의 내부 구조</h3>
<p>저장되는 데이터 구조를 살펴보겠습니다</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">Hashtable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">0.75f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
     <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
     <span class="token class-name">V</span> value<span class="token punctuation">;</span>
     <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span>
     
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre></div>
<p>저장 데이터 단위는 Entry로 구성되어 있습니다<br>
HashTable은 11개 사이즈의 <code class="language-text">Buckets</code>을 생성합니다</p>
<br/>  
<p><strong>HashTable의 내부 운영 방식</strong></p>
<ol>
<li><strong>Buckets 사이즈 조절</strong>
HashMap과 동일하게 전체의 75%가 차게되면 사이즈를 조정합니다<br>
<code class="language-text">int newCapacity = (oldCapacity &lt;&lt; 1) + 1;</code> 쉬프트 연산을 통해 기존 사이즈의 두배 +1 의 값으로 재설정 됩니다</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 72.83236994219652%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD90lEQVQ4y32SC0xbVRjHvz4GzJg4p5G4ucXFMSePYWwWHIIyHBkxYozGjETNYrLpdBGHWVYYxsHWOh5jKziEDkwty8rK2Ag4IiCvDkcLLSt9XPq4t7dvoPS1YhnPcDxX8RGz7CS/fDnfueef//3+B+DfxVrnv/tHLdZDeOTHsCEu5gUOl5PL2cDN4OW+zmF6+YfzWeXflz/0cmZ25j/9jZhkzMuYJ9d7z6/vMzEZmF0cFot7vUsKFXXnmPMtTG+dFMy2vWl716+mpGyEuLhUiIlJZ23e/MwO3HpiS/z2V995Myf743ez3sh/OyctLzsL2BBLB7yxKtPEY6/tz9iXyks9xEvj5e15Zc/76VnpB0USETaGEIDBAMDnAxQUAFy+AnkoDF4Ufbr9gd58K6oLtc/rf+9YMI58mHMQJhzjl7qGO0nCQxDOiHOODtEB55xzlgpQKx19HZ8wgk/B4mIChEI7IRhMiPX7EmAJbT8dJXe3hTSB1pAGtYbHUbNrmMLGd0ivmRslzSaqiZR6G6z1SGwRI9GYCImtYnRh7MJRRrACHA4EdvsSrqssgliBQBDtjgYK5WQPJXEq0BVzD2qy9pmAC9tEF93iivMW6ju62lms46My29nVU+pTy6VkKSrRlxwBWFuLh7m5ZFhZeQkWFhJjlpeSYA3t+ipAJMn9ozM/Uv2o0dKLfnIozEwA4kZL7Q/1hLbWVO+q0lWiGmvtWuW9ytVqYzUSKAVHGIfZEA6XgcdTDF7vabadLoHog5LcJf+Ba3S/W+oeRm0RLboRHjcdey8fz1Df8MvdntkJ58SUJWBBJp8JmQPmP2vnUOenjGARTE/PAkGQ+LdtLKORgvsRT1LI+1mro98ux/OTB9UMRNW9W7FiScMm2e3rzwpFwp2Ci+eSTn57MrWorChFcEmQfKLkxKa/Uv7fqkjbCt0L+q1tc1pfa5gJRYMdaiafw2dau+qtrt/aC9WE+msDZRCojWqh1qI9qyN15Tdv3+QBnt032FkEO3QBSXpYNO0Gl9ufFJn5vMXaTTdPjSCZT4Vk00pmhmyV0dLU2T88+6u1b17hUqAhHNqAbQANOgbR1cGrXzKC+8HlOgM0zQens4jtdheD21ucMz99oM034mBmKLEPIgk9SGDBxLrL3sYakd1aZa8hSyfPrApJ4Tz/Lj8qpISo1FiK3+HyMmAxAJMJgMJPzeaAF90k2PwD8Xh+izgMdOP+OBOKp/u8FLS2ybqfh3o9CvOdiNKuRCP0CPq7ynplxxmHbJia4uKUuUyNn8HVhdj1Yd3jrUH1RziMo/LA2DHMB8hiALPPsE+h6z90R6M4PGocLVDpVccxXyj1ysKW9pbEPwC0CU6hoqIzpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="hash buckets"
        title="hash buckets"
        src="/static/ea030c85da279b0df066a730b73f0e6e/1e043/hash-bucket.png"
        srcset="/static/ea030c85da279b0df066a730b73f0e6e/991de/hash-bucket.png 173w,
/static/ea030c85da279b0df066a730b73f0e6e/e4d6b/hash-bucket.png 345w,
/static/ea030c85da279b0df066a730b73f0e6e/1e043/hash-bucket.png 690w,
/static/ea030c85da279b0df066a730b73f0e6e/e3189/hash-bucket.png 1035w,
/static/ea030c85da279b0df066a730b73f0e6e/21b4d/hash-bucket.png 1280w"
        sizes="(max-width: 690px) 100vw, 690px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span>
<span class='img_caption'>Source : <a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="nofollow noopener noreferrer">Hash Table Wiki</a> </span></p>
<br/>  
<ol start="2">
<li><strong>Linked List</strong><br>
Entry도 Node와 같이 Linked List구조로 <code class="language-text">Entry&lt;K,V> next</code>를 가지고 있는걸 보실 수 있습니다<br>
HashMap과 동일하게 충돌방지로 Separate Chaining(분리 연결법)을 사용하는걸 알 수 있습니다</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 68.78612716763006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADsElEQVQ4y3WTbUybVRTHT0GgUCgTnVETZyTzE8z5QeMIicbNZC4ajGXZsmxMkmVbZhbXhqVloe8tlL4TDCOZToPLOl9Ii91oh6V1MATC21poV1YrgwqTAgMCsi1m7vF/u5qoiU9ycu+597m/+z/n3EP0ny83L5c4jkvZ/B/zPDb+/VWaKqllrYVOfHfiX2cOnj1IzavNpBxTpleKirKpoIBPTidRGtYT+5Y2uElKA7NgT7DJPy7IyuJnCTYXb06t83H88V55OfOFsC12ttB2gSyGUzzzOSkluaFia6vywyMfHdlfUJgvqFBWpA5VtVaxM5tgL8Hydp/eTbV9tRTgAnBDoQz8xctmOxyXmVaYCtUTiF7y9AeXHMGLndh+7kz/mTbLnGVAf0sfUIVUfsx9poQpoAlrAtqIdtAwZWgmevRIRouLIzQ93YVxqODBg8p0UE+2u+L+9u5xznbNEswm/iaxV/xy3WDddkmXpPT418e31XTXvCK7Ltt28vuTpbDt0l5pMQOW0MLCHpqc3EVLS+9uGRvbWkf09KenDlAk0bNnIOz75LLvymFckAngx4a4wai7qdOqQ2o95vr6WL1eF9VpodqI8SjRw4diWl0NUCLRTisrfrp/vwIKszmfg4Z/n/ugPxGWdnS5qgF8/lDroTrjtFGtvKGUI3xF/a16RUO8QQG4XDOh0QFYzcq2A8BqAPfTxkY1/K0A8pIIeaq2pnu0ScVZrjcFc5Divaa9u/A03pSPyN+QD8vLoLQMoDLFqGKHYkRRjnkJA1bR8vKXFI02Qd0XUPkOgHl8KHJKLnd8Y3OuSX6S/AiFGUi+GQp9AHQA6Db8YnA33m50Q2EH7AekoJGF/D6trWkBktK9e5qiubkyGdGzrMq9sdnP/Tej05euOdyC3PxnRMZKocQrKbQv2IXnufNCgIUojtCWtAnNs+bCY45jAlaU92hmRgWFpymZVOWvr7/+FMK14oWt/Ol5YSjkeNXjvlrC3p2sV+a1L9rjeCITCD1i/tUcMc4YI9qwdkIf1U9B7QUW8gG6e7eV4nEjcngW87dfI8phndB3I3rOPzp8+yt/W2dseZbHws7gZQhYh/6P5TDgTuRQDOBRhC6GX0qP20vgcCSuXuwMc6YBQz/8F6U90hbbvM2jn9Q7kTOX9Y7VBVUuVNcJld6GnxsaUr0LIAFIAKZ89fpvmabPrBS5My4djg26vH1eK2tXxZhip2nGtA9dIkKlRSiQCO9PpAqqROpx9T6A3/oLtDcDOlKGcSgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="hashmap buckets"
        title="hashmap buckets"
        src="/static/130e3347a853a23f466502dd9bd941a5/1e043/hashmap-bucket.png"
        srcset="/static/130e3347a853a23f466502dd9bd941a5/991de/hashmap-bucket.png 173w,
/static/130e3347a853a23f466502dd9bd941a5/e4d6b/hashmap-bucket.png 345w,
/static/130e3347a853a23f466502dd9bd941a5/1e043/hashmap-bucket.png 690w,
/static/130e3347a853a23f466502dd9bd941a5/e3189/hashmap-bucket.png 1035w,
/static/130e3347a853a23f466502dd9bd941a5/21b4d/hashmap-bucket.png 1280w"
        sizes="(max-width: 690px) 100vw, 690px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span>
<span class='img_caption'>Source : <a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="nofollow noopener noreferrer">Hash Table Wiki</a> </span></p>
<br/>
<p>HashTable은 Liked List의 사이즈의 대해서 효율성을 위해 Tree로 바꾼다거나 하는 로직은 찾아 볼 수 없습니다</p>
<br/>
<br/>
<p><strong>다음으로 put의 코드를 살펴보겠습니다</strong></p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="gatsby-highlight-code-line"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>  </span> 
        <span class="token comment">// Make sure the value is not null</span>
<span class="gatsby-highlight-code-line"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span></span>      
        <span class="token comment">// Makes sure the key is not already in the hashtable.</span>
        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">></span></span> tab<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> table<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>     <span class="token keyword">int</span> hash <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">(</span>hash <span class="token operator">&amp;</span> <span class="token number">0x7FFFFFFF</span><span class="token punctuation">)</span> <span class="token operator">%</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
<span class="gatsby-highlight-code-line">        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> entry <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span> entry <span class="token operator">=</span> entry<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> entry<span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>                <span class="token class-name">V</span> old <span class="token operator">=</span> entry<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                entry<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
                <span class="token keyword">return</span> old<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      
<span class="gatsby-highlight-code-line"><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>     <span class="token function">addEntry</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>  </span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addEntry</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">></span></span> tab<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> table<span class="token punctuation">;</span>
        
<span class="gatsby-highlight-code-line"><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">>=</span> threshold<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">            <span class="token comment">// Rehash the table if the threshold is exceeded</span></span><span class="gatsby-highlight-code-line">            <span class="token function">rehash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>      
            tab <span class="token operator">=</span> table<span class="token punctuation">;</span>
            hash <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            index <span class="token operator">=</span> <span class="token punctuation">(</span>hash <span class="token operator">&amp;</span> <span class="token number">0x7FFFFFFF</span><span class="token punctuation">)</span> <span class="token operator">%</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      
        <span class="token comment">// Creates the new entry.</span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>HashMap과 다르게 간단한 put 구조를 가지고 있습니다</p>
<br/>
<p><span class='red_font'>(1)</span> <code class="language-text">public synchronized V put(K key, V value)</code></p>
<blockquote>
<p>synchronized를 통해 thread-safe하게 설계된걸 확인 할 수 있습니다<br>
이후 HashMap에서는 사용상에 thread-safe 구성이 효율적이지 않다고 삭제되었습니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(2)</span> <code class="language-text">if (value == null) { throw new NullPointerException(); }</code></p>
<blockquote>
<p>HashMap과 다르게 value에 null을 허용하지 않습니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(3)</span> <code class="language-text">int hash = key.hashCode();</code></p>
<blockquote>
<p>key값도 보조해시 없이 그냥 hashCode()를 사용합니다<br>
때문제 key에서도 null이 허용되지 않습니다 (HashMap에서는 보조해시에서 null일 경우 0을 할당합니다)</p>
</blockquote>
<br/>
<p><span class='red_font'>(4)</span> <code class="language-text">for(; entry != null ; entry = entry.next)</code></p>
<blockquote>
<p>Entry를 탐색하며 값변경만을 적용합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(5)</span> <code class="language-text">addEntry(hash, key, value, index);</code></p>
<blockquote>
<p>addEntry를 통해 신규 Entry를 buckets에 삽입합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(6)</span> <code class="language-text">if (count >= threshold)</code></p>
<blockquote>
<p>buckets의 Entry사이즈를 확인하여 rehash() 여부를 결정합니다</p>
</blockquote>
<br/>
<hr>
<br/>
<h2 id="concurrenthashmap병행해시맵" style="position:relative;"><a href="#concurrenthashmap%EB%B3%91%ED%96%89%ED%95%B4%EC%8B%9C%EB%A7%B5" aria-label="concurrenthashmap병행해시맵 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ConcurrentHashMap(병행해시맵)</h2>
<p>다음으로 알아볼 것은 ConcurrentHashMap 입니다<br>
ConcurrentHashMap의 핵심은 Unsafe를 사용한 <span class='red_font'>thread-safe</span>를 지원한다는 것입니다</p>
<p><code class="language-text">Unsafe</code>는 java 내부의 존재하는 thread-safe를 위해 존재하는 class입니다<br>
내부적으로 AutoInteger, ConcurrentHashMap등의 thread-safe에 사용되며 일반적으로는 생성해서 사용하지 못하도록<br>
<code class="language-text">private static final Unsafe theUnsafe = new Unsafe();</code>로 생성자를 막아 두었습니다<br>
해당 포스트에서는 다루지 않습니다 👉 <a href="https://www.baeldung.com/java-unsafe" target="_blank" rel="nofollow noopener noreferrer">java-unsafe</a></p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Unsafe</span> <span class="token class-name">U</span> <span class="token operator">=</span> <span class="token class-name">Unsafe</span><span class="token punctuation">.</span><span class="token function">getUnsafe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token keyword">static</span> <span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
     
     ABASE <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">arrayBaseOffset</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">int</span> scale <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">arrayIndexScale</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     ASHIFT <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">-</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">numberOfLeadingZeros</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
     
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token function">tabAt</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">getObjectAcquire</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>i <span class="token operator">&lt;&lt;</span> ASHIFT<span class="token punctuation">)</span> <span class="token operator">+</span> ABASE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">boolean</span> <span class="token function">casTabAt</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span>
                                  <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> c<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">compareAndSetObject</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>i <span class="token operator">&lt;&lt;</span> ASHIFT<span class="token punctuation">)</span> <span class="token operator">+</span> ABASE<span class="token punctuation">,</span> c<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ConcurrentHashMap는 내부의 thread-safe를 위해 조회와 삽입을 하는 메소드가 구현되어 있습니다<br>
tabAt는 thread-safe하게 조회를 하고 casTabAt는 thread-safe하게 삽입시 성공여부에 따라 <code class="language-text">true</code>, <code class="language-text">false</code>를 return 합니다</p>
<p>해당 메소드들을 통해 알 수 있듯이 HashTable과 다르게 각각의 Node의 대한 thread-safe 기술을 활용하여<br>
HashMap의 thread-safe가 안되는 문제를 효율적으로 제어하였습니다</p>
<br/>
<br/>
<p><strong>다음으로 put의 코드를 살펴보겠습니다</strong></p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MOVED     <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// hash for forwarding nodes</span>

 <span class="token comment">//보조 해시</span>
 <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">spread</span><span class="token punctuation">(</span><span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span>h <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">>>></span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> HASH_BITS<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token comment">//resize를 위한 Node</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">ForwardingNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
     <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> nextTable<span class="token punctuation">;</span>
     <span class="token class-name">ForwardingNode</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">(</span>MOVED<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>nextTable <span class="token operator">=</span> tab<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>



<span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line"> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="gatsby-highlight-code-line"> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token function">spread</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>        <span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab <span class="token operator">=</span> table<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> </span>            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> f<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">,</span> fh<span class="token punctuation">;</span> <span class="token class-name">K</span> fk<span class="token punctuation">;</span> <span class="token class-name">V</span> fv<span class="token punctuation">;</span>
            
<span class="gatsby-highlight-code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                tab <span class="token operator">=</span> <span class="token function">initTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>                
<span class="gatsby-highlight-code-line">            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>f <span class="token operator">=</span> <span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">casTabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                    <span class="token keyword">break</span><span class="token punctuation">;</span>                   <span class="token comment">// no lock when adding to empty bin</span></span>            <span class="token punctuation">}</span>
            
<span class="gatsby-highlight-code-line">            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>fh <span class="token operator">=</span> f<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token operator">==</span> MOVED<span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                tab <span class="token operator">=</span> <span class="token function">helpTransfer</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span></span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>onlyIfAbsent <span class="token comment">// check first node without acquiring lock</span>
                     <span class="token operator">&amp;&amp;</span> fh <span class="token operator">==</span> hash
                     <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>fk <span class="token operator">=</span> f<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>fk <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>fk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                     <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>fv <span class="token operator">=</span> f<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> fv<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">V</span> oldVal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"> <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span> </span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">==</span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>fh <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            binCount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e <span class="token operator">=</span> f<span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token class-name">K</span> ek<span class="token punctuation">;</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>
                                    <span class="token punctuation">(</span><span class="token punctuation">(</span>ek <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span>
                                     <span class="token punctuation">(</span>ek <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ek<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    oldVal <span class="token operator">=</span> e<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
                                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent<span class="token punctuation">)</span>
                                        e<span class="token punctuation">.</span>val <span class="token operator">=</span> value<span class="token punctuation">;</span>
                                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> pred <span class="token operator">=</span> e<span class="token punctuation">;</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    pred<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">TreeBin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p<span class="token punctuation">;</span>
                            binCount <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeBin</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putTreeVal</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span>
                                                           value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                oldVal <span class="token operator">=</span> p<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent<span class="token punctuation">)</span>
                                    p<span class="token punctuation">.</span>val <span class="token operator">=</span> value<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">ReservationNode</span><span class="token punctuation">)</span>
                            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"Recursive update"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">>=</span> TREEIFY_THRESHOLD<span class="token punctuation">)</span>
                        <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVal <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                        <span class="token keyword">return</span> oldVal<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line"> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> binCount<span class="token punctuation">)</span><span class="token punctuation">;</span> </span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre></div>
<br/>
<p><span class='red_font'>(1)</span> <code class="language-text">if (key == null || value == null) throw new NullPointerException();</code></p>
<blockquote>
<p>HashMap과 다르게 null을 허용하지 않습니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(2)</span> <code class="language-text">int hash = spread(key.hashCode());</code></p>
<blockquote>
<p>spread()는 보조해시 함수로 이전에 본 HashMap과 크게 다르지 않습니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(3)</span> <code class="language-text">for (Node&lt;K,V>[] tab = table;;)</code></p>
<blockquote>
<p>ConcurrentHashMap는 값 삽입시 thread끼리 충돌이 날수 있기 때문에 재시도를 위해 for문으로 시작됩니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(4)</span> <code class="language-text">if (tab == null || (n = tab.length) == 0)</code></p>
<blockquote>
<p>buckets의 초기 세팅이 필요한경우 buckets을 생성합니다<br>
HashMap과 똑같인 DEFAULT_CAPACITY = 16의 LOAD_FACTOR = 0.75f을 기본값으로 가집니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(5)</span> <code class="language-text">else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null)</code></p>
<blockquote>
<p><code class="language-text">tabAt</code>을 통해 Node가 처음 삽입되는 값인지 확인합니다<br>
<code class="language-text">casTabAt</code>통해 값을 삽입하며 삽입시점에 buckets의 값이 null인지 확인하여 성공시 true, 실패시 false를 리턴합니다<br>
삽입에 실패하면 <span class='red_font'>(3)</span> for문으로 돌아가 재시도 합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(6)</span> <code class="language-text">else if ((fh = f.hash) == MOVED)</code></p>
<blockquote>
<p>hash값이 MOVED(-1)인지를 검사합니다(ForwardingNode의 hash값)<br>
helpTransfer()를 실행하여 리사이즈를 진행합니다</p>
</blockquote>
<br/>
<p><span class='red_font'>(7)</span> <code class="language-text">synchronized (f)</code></p>
<blockquote>
<p>탐색시에 synchronized를 사용하여 해당 Node의 LinkedList, Tree의 대한 thread-safe를 보장합니다</p>
</blockquote>
<p><span class='red_font'>(8)</span> <code class="language-text">addCount(1L, binCount);</code></p>
<blockquote>
<p>size를 측정하여 transfer로 리사이즈를 진행하고 ForwardingNode을 할당합니다</p>
</blockquote>
<br/>
<hr>
<br/>
<h2 id="hash-collision해시-충돌" style="position:relative;"><a href="#hash-collision%ED%95%B4%EC%8B%9C-%EC%B6%A9%EB%8F%8C" aria-label="hash collision해시 충돌 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hash Collision(해시 충돌)</h2>
<p>다음은 해시들의 충돌을 해결하는 방법을 2가지 제시합니다</p>
<br/>
<h3 id="separate-chaining분리-연결법" style="position:relative;"><a href="#separate-chaining%EB%B6%84%EB%A6%AC-%EC%97%B0%EA%B2%B0%EB%B2%95" aria-label="separate chaining분리 연결법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Separate Chaining(분리 연결법)</h3>
<p>가장 널리 사용되고 있는 분리 연결법입니다</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 50.28901734104046%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACx0lEQVQoz22Sa0iTURiA322siLQbZSQogYR/ooQwgvpj2Q8RKiIiEn8EBREEo6KYtPsqxHQ6UjeWutzmNr42L9k2ndaUtTm3Lzd2+bY5NTWdNpt4r8hOZ2b1o154zuEcznnO+/IeAIeDBkVFTKiooGcjBKmYQAQMB12wPLwGCO/9JuqIQsgWAvZtNqRtT0sd3Ys5gjkAf+KXJGM3Hphy+cZWEunSg56+zJnBRDaXxc0vvVBaKOFLjiZ9yaweVc8etPnwpvAYZv9f4fx8DoyPn6BNx/OZCKWe3arWOfVGsmepfbwVGSJGZIwZUVusDREUgZQupcyasIIlbmHAf2Nu7hqMjclgerrqoM2WdxyAQZip+y8Hu18booTTEDbYsciO5359QO9vdDbeG1gYAOI7sUWalDJkX2UMxbqCUbtUy2hADXSA5eVzOMMyLL6zz2bLTRXjcGsvub1vHlKjkcf+qF/sDXlF1BglIgNkVZet67xySAnSdSlI56WAhRvUfK6B+rV6fHtl5TJEIk9gaooPi4s5PwB2Oq4LDKrWp6hypAZVByRIGpWi6lA1kgQlSNgnbCp5XnJS4BdUsZ1sAW+IJ+L7+AK2g13O8/JKUsKrkEhUYpk4q6Mj7wzALnWzW653maKamGpWE2mJ68Z0cU1Y81EdUX+pc9Q9KlYUZ4iCoiIsKhAGhKexvIDn453Fa9zxmZmL4PXyYXT0QTpBHMY506LrrlMe37sbIR911+/1s0gnyaKCFIt0kWyrxVrY7GiGsnAZCAICEIfFG2ApiEIifH119QrEYuUwOyvEHGICbHuh8rbqPF3f9BMtSBvTId0HzIgO4QyR3CNXmBfM0DTZxOS4OHRcMp37nkvneDgpaKl/SMcwdmBSTc/MBZrprfOWmexVWSPdryxBS5spYGq3UlZjp6+zV9uvvWmftIP7k5vOe8b759P8BI2AlQfbDrhhAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="separate-chaining"
        title="separate-chaining"
        src="/static/7be89f0660af9d61a94e65f17b8ae124/1e043/separate-chaining.png"
        srcset="/static/7be89f0660af9d61a94e65f17b8ae124/991de/separate-chaining.png 173w,
/static/7be89f0660af9d61a94e65f17b8ae124/e4d6b/separate-chaining.png 345w,
/static/7be89f0660af9d61a94e65f17b8ae124/1e043/separate-chaining.png 690w,
/static/7be89f0660af9d61a94e65f17b8ae124/e3189/separate-chaining.png 1035w,
/static/7be89f0660af9d61a94e65f17b8ae124/b1001/separate-chaining.png 1380w,
/static/7be89f0660af9d61a94e65f17b8ae124/29114/separate-chaining.png 1920w"
        sizes="(max-width: 690px) 100vw, 690px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span><br>
<span class='img_caption'>Source : <a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="nofollow noopener noreferrer">Hash Table Wiki</a> </span></p>
<p>새로 값을 삽입할때 해시의 buckets의 같은 공간에 이미 값이 존재하고<br>
해당 key와 value의 값이 삽입되야하는 값과 다르다면 값을 저장하는 모델(Node)을 만들고<br>
Linked List, Tree등의 자료구조를 사용하여 연결하여 삽입하는 방법입니다</p>
<br/>
<h3 id="open-addressing개방-주소법" style="position:relative;"><a href="#open-addressing%EA%B0%9C%EB%B0%A9-%EC%A3%BC%EC%86%8C%EB%B2%95" aria-label="open addressing개방 주소법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Open Addressing(개방 주소법)</h3>
<p>개방 주소법은 buckets을 그대로 사용합니다<br>
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 86.70520231213872%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEsElEQVQ4y3WUa0xbZRjHn3ZbtgjGOIwazZTFjsumxsQPi8Y4TfSD2aIuLpuJYYubl+yDm9coDNyANXJxYQbL2HDrCgVaoKQwxqE1XEqhtKWX0/ZA20NvlJaWe5GCtSs8vqcj8ZNv8j/veZ5zzu88l/d9Af5nKPvvgbSrFfrHh3i/i2/w3QssDxF5cYzzuZkItsVLYIK/hVv8SCrCe/j1rl07yfUQ8HhZaTszE76/egGOf/weL4YstPaJYGaeTQM0Wg33RgZRHtFznG9+ZT79LBqKEhf5A3R374TDhzPh2LE9xOZnh0K8Dsmv/MraMgiuu1/XufpFOptWSLtsLQ6PQ2pxWeTDhmGlWqNW0G66lfExjVantUs9pD7OAQEiEYDhYYDRUYBYDPZtp0PG7ht3ND91dAbWpON97pZwEzZ5mvCu6y7KwjKUTktR6peieFKMjZ5GvO28XcYBj8LqajOEQvUQCNyCtbU7exOJl/BhMfa099i/6+71YptJPaMItWObtx1lrAwVQQXKvDJs97ejfEqeniWMpIIDHoGVlWoIBq+A11sK8fjVgyx76ArA3ljVVzAXt71ocvd9O27XnptgJ4sYlrk06ZkscrgchXqTvpC7Z6aYQofbUTagGXiDA74KicRFkuoXsLT0JWxtnQeTSSADeGLwuhAsmNqv+zt6cthpPWqfpAvMjOWMdcJ6mp6gC0YMIwU2p63AZDedJr7P1APqlzngByTlThKdGJxOCUm5FTY2XiEp888A7GDb7l50NDXgn5qWMBVWIeWnsNffi9Q0hUq3EqkAlRbnk9PyKg6YD8nkJ7C4+BEBnyARnoJU6imuWVqA7GC+4NLsfkFIfutTy8+RX1KXLIXJIrooKQwKkxWzFcnSqdJkCVOyQWYs95UXc8BTsL4+BB6PkjSlGzY3KfD7XyMRPkqTOlpOnP/a8P43c+K2Ero8WrFVYilOXZ64nKqarUpVhitTZWxZqpguTgi9QhT6hCUc8HmS4rukGUdIHd8m9lsHGxv3tQHsr6GS0DGYPNcin//ntpFixXN/oIipIxKhJCrBhukGvDl1E+ucddjgb0CRS1TOAc/C8rKLRKgjddQTsOXJhYU3rQBZuGgHZ8j+oWnKODTqGJFZfVYL7afNdIA2mz1m84h9xGybtnG2kdge9Zj6cw6YRWqYT9LO4W1u5hI756RC8dgPBEjWIW85SWfo2a5sVb9yX989VY68WZ6nkCnyqB7qQGdHZ05PV09uq7Q1n7pH5TU3NmdxwAskqlUSnRd8vgCBR55eWnqH1DB9ADiCvrNa2rox4NAyhrABjWFjWvoZPQ66BtEQMqBhxpAamx7DXkvvZQ64i3Q2ExYWMkhTMnjxeCbx7djeeo9XXtMWSiUri3W6bqZuvharbFV4zXkN6+fqsTZYi9e917Gaqd6qYWuwxlNz5eFefvAAIBwGYFkgwLRvkxwSnqUQGN306RH7uH/QPjxqCOj/0vv0Mb1fHxvzjcUGmIGYMWCMGfyGRZ1Xh/eN93/8D8iB1taArEHYTXx3fiuC7qEWiD6YesS7Sj+j0vQ8S6moA+pBtYDsCAGlpgQKpUKg6ldxeoHYuc2y5r3/AtfvNC9O7n7CAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="open-addressing"
        title="open-addressing"
        src="/static/f201f9ad687bb6cf37b024b6c3728994/1e043/open-addressing.png"
        srcset="/static/f201f9ad687bb6cf37b024b6c3728994/991de/open-addressing.png 173w,
/static/f201f9ad687bb6cf37b024b6c3728994/e4d6b/open-addressing.png 345w,
/static/f201f9ad687bb6cf37b024b6c3728994/1e043/open-addressing.png 690w,
/static/f201f9ad687bb6cf37b024b6c3728994/2bef9/open-addressing.png 1024w"
        sizes="(max-width: 690px) 100vw, 690px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span><br>
<span class='img_caption'>Source : <a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="nofollow noopener noreferrer">Hash Table Wiki</a> </span></p>
<p>해시의 buckets의 같은 공간에 이미 값이 존재한다면 새로운 주소로 buckets에 값을 할당하는 방식입니다<br>
새로운 주소를 구하는 방법은 여러 방식이 존재합니다</p>
<blockquote>
<ol>
<li>고정폭을 가지고 삽입하고 값을 이동시킨다</li>
<li>처음엔 1만큰 이후에 2^2, 3^2 만큼 옮기는 방식</li>
<li>해시값을 한번더 해싱하여 새로운 주소로 값을 삽입합니다</li>
</ol>
</blockquote>
<br/>
<p><strong>서로의 방식에는 장단점이 있습니다</strong></p>
<p>Separate Chaining의 경우 buckets자체의 확장이 필요없고 삽입과 삭제가 손쉽게 가능합니다<br>
단점으로는 <span class='red_font'>List 및 Tree의 길이가 늘어날수록 탐색의 효율이 떨어지게</span> 됩니다</p>
<br/>
<p>Open Addressing이 추가 메모리 할당 없이 buckets자체를 사용하게 됩니다<br>
단점으로 <span class='red_font'>삽입과 탐색시 효율이 떨어지며 삭제시 빈공간의 대한 buckets 재정리 작업</span>이 필요합니다</p>
<hr>
<h2 id="마무리" style="position:relative;"><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-label="마무리 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>마무리</h2>
<p>HashTable의 충돌발생시 해결법을 알고 있느냐는 질문을 받았습니다<br>
그때 당시 Separate Chaining(분리 연결법)의 방법을 알고 있었지만,<br>
충돌자체를 thread-safe여부로 받아들여 HashTable은 충돌이 발생하지 않는 걸로 알고 있다고 답해버렸습니다 😭</p>
<p>이를 계기로 명확하게 구조를 보고 정리하는 시간을 갖게 되었습니다 👋</p>
<hr>
<br/>
<h2 id="관련-참고" style="position:relative;"><a href="#%EA%B4%80%EB%A0%A8-%EC%B0%B8%EA%B3%A0" aria-label="관련 참고 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>관련 참고</h2>
<p><a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="nofollow noopener noreferrer">Hash table 위키</a><br>
<a href="https://d2.naver.com/helloworld/831311" target="_blank" rel="nofollow noopener noreferrer">네이버 D2 포스팅</a><br>
<a href="https://mangkyu.tistory.com/102" target="_blank" rel="nofollow noopener noreferrer">망나니개발자님 블로그</a><br>
<a href="https://velog.io/@alsgus92/ConcurrentHashMap%EC%9D%98-Thread-safe-%EC%9B%90%EB%A6%AC" target="_blank" rel="nofollow noopener noreferrer">alsgus92.log</a><br>
<a href="https://hongjw1938.tistory.com/17?category=884192" target="_blank" rel="nofollow noopener noreferrer">겐지충프로그래머님 블로그</a>  </p></div><div class="social-share"><a class="resp-sharing-button__link" href="#" target="_blank" rel="noopener" aria-label="Share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"></path></svg></div><span class="service-label">Share on Facebook</span></div></a><a class="resp-sharing-button__link" href="#" rel="noopener" aria-label="Share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"></path></svg></div><span class="service-label">Share on Twitter</span></div></a></div><hr class="custom-hr"/><div class="bio"><div class="author"><div class="author-description"><div class="author-image gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:72px;height:72px;border-radius:100%"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEz0lEQVQ4ywHEBDv7AH6fl5Slt2tgYj8wK1RFQYFiTK+Mba+ReLOXhLiejLyhjL6hisGjisCih7ydgquMdJl7ZauMc6SGb5Z7ZQB+mZCUqb2Rm6N9fXV0YmC4pJi4kXC7mn7AoYjFqI7LrJHQsJTSsZTUspXXtZjYtpfYtpjUtJfRsZXKrJEAgpSKjqW5l5+omLOgoJyg79rRyZpnzJ1p2Kx46r2H88qS882W8MeO88qR8cyS9NSc7MSP5r2L37eG1a6CAIyQmZSkup2jrpStnpKisNG+ttOlcMecbYZiRZdyT9u1g/fUmfnTkvfPkP/Xk+TFj+a/h/nOjuy+gei5fACvuMuyyeWlrMKbus2UqsPd09DTpnZtRi9IKRk6HxI0HhJfQirLpXP82Z771prz2bLz0KD50JP0zJPvw4sAnoyBpqCfoJeZvsvHqbjI49bYoXlkVTImTzEiPCUYOiQWLRQKZUYu/OKt++W0/eCs/dig/Nqk/eCt/dqnALGzv5CJi29dWqqkpoyFhtrP0V5NTS8hISgbGSIUDSgXDisYDjMZC9y5i//lrv3dqP/bpf7ZoP3Yof/cpwCptb3Z2d+Fe4TBx9CqrrjTxMQ9OD0iGx46LC9KMy1HLCBHKBpEJxfEnnTku4fkvIjmvovlu4bku4fswo8A2uXjxNXji4WRx9DVn6Cq2MvKfW1sknNwsIBy3KKMrHZhwYNglmE+VzsrXkM1Y0UzZUc1Y0cyZEgzYUczALjY9aKuv4B4hJaVmYWIk21kZolvbOq9sNGhl+6wmducgO+xi8WCV0AnGUIrGkgvHkYtHEUrG080H0QrGACsoqOLfXlKP0VCSmVPa49ucXl0Y2L8yr7ttqjdoIntpYL9v6CLXDwwHRJCKRgtGg86JBVAJRQ5IhJQLhoAcHF0T1RhTUpSc4GDbX6GfXh7iGlU0aie6baq0IV114tn255wYUUuKBoVPikcJRcPMiEUOCMUOyUWZUQnAEVJUD1ET1VbYZWqpHmKimReYHFUQJd1asGSicF2aMyAU7Z+SbqSYnhcQaF9VXxdO4NgPJRuQY5pQdalZwBaZHAwN0IVFiIiKTctKzFkUUY7MjRaQzu4loq1jXy9eUxnQSa6nHL80ZL/2Jv/3Jv91pf2zI7wxoX1zJAAYnB9GRohKyksLiUoPCwpQDArNCgrNx8YnnBXvp6RsoFkPykeMSEXQy0cTTYljnFR58SQ/dea8syQ+NGWAEU8PEw/OkU1MDcnJSUYGSEVFSgdHRYLCGtAJ7OKdHVaUw0IBhcNCRkODB0REBQJCDwqH7GPZPjPkfXNlQAnGhouHx0oGhgiFBMgFBMeFBMTDw0ICAkmDQ9CEhcRCAgQDQoXFBEZEhAhFhQeFRIgExAlEwutilz/4qAAKx4cIhYUGQ8NHBMRHBQUHBIQGhMRDQ4NGw0QQAgIGQ4LHRQTHRUTFhEOEg0LDgsJGxMOHhEOPCgatJhwABwRDRoQDBAJBg8LCRwWFiAVFBwREBQPDA4QEigMDB8PDR0TEhsSERoSEBUNCwkHCBMODB4TEBwQDCMTCwAZDgoRCQYLBgMJBgUbFBQfFBMZDw0UDgsVEREbDg4kFQ8eExAdExEeExEXDw4IBwcJCAoWEA4kGBEwHxTXF/+1PnzuWAAAAABJRU5ErkJggg==" alt="deokhwa kim" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3fc5562e6ad25d80970b53e8e9afab0c/e5b88/profile.png 1x,
/static/3fc5562e6ad25d80970b53e8e9afab0c/e7bd6/profile.png 1.5x,
/static/3fc5562e6ad25d80970b53e8e9afab0c/a12fc/profile.png 2x" /><img loading="lazy" width="72" height="72" srcset="/static/3fc5562e6ad25d80970b53e8e9afab0c/e5b88/profile.png 1x,
/static/3fc5562e6ad25d80970b53e8e9afab0c/e7bd6/profile.png 1.5x,
/static/3fc5562e6ad25d80970b53e8e9afab0c/a12fc/profile.png 2x" src="/static/3fc5562e6ad25d80970b53e8e9afab0c/e5b88/profile.png" alt="deokhwa kim" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="author-name"><span class="author-name-prefix">About Me</span><a class="author-name-content" href="/about"><span>@<!-- -->deokhwa kim</span></a><div class="author-introduction">Backend Engineer / Spring / Elastic / Kotlin / Webflux</div><p class="author-socials"><a href="https://github.com/renuevo">GitHub</a></p></div></div></div></div><ul class="navigator"><li><a rel="prev" href="/spring/spring-version-upgrade/">← <!-- -->[Spring] Spring Boot 2.3.x Dependency 업그레이드</a></li><li></li></ul><div><div id="disqus_thread"></div></div><footer class="footer">©<a href="https://github.com/renuevo">renuevo</a>, Built with<!-- --> <a href="https://github.com/JaeYeopHan/gatsby-starter-bee">Gatsby-starter-bee</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-147163050-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/data-structure/map-interface/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c5f50f2ad13861331c8a.js"],"app":["/app-ebf0294f0ed7a67bde7b.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-241020a1cf7d0f317bbe.js"],"component---src-pages-404-js":["/component---src-pages-404-js-64b4b10bec6f94406ee7.js"],"component---src-pages-about-js":["/component---src-pages-about-js-f6a62541db39ed415248.js"],"component---src-pages-index-js":["/component---src-pages-index-js-8e0fbdd35a072140de59.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-f135ee67b10d289fc836.js"]};/*]]>*/</script><script src="/polyfill-c5f50f2ad13861331c8a.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-f135ee67b10d289fc836.js" async=""></script><script src="/cd7d5f864fc9e15ed8adef086269b0aeff617554-6341a6960d46b1cc0197.js" async=""></script><script src="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-2ebf920bd49eb6dc674f.js" async=""></script><script src="/133dca110fad53aa1997b630637bbac3134a2d14-a18cb3de793a9cd4c3b2.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-ebf0294f0ed7a67bde7b.js" async=""></script><script src="/framework-9252bfa5ea71b588207d.js" async=""></script><script src="/webpack-runtime-903f659ab042168d7448.js" async=""></script></body></html>